<!DOCTYPE html>
<!-- saved from url=(0082)https://statistacomdev.cleverpush.com/iframe?origin=https%3A%2F%2Fwww.statista.com -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="dns-prefetch" href="https://static.cleverpush.com/">
    <link rel="preconnect" href="https://static.cleverpush.com/" crossorigin="">
    <link rel="dns-prefetch" href="https://api.cleverpush.com/">
    <link rel="preconnect" href="https://api.cleverpush.com/" crossorigin="">

    <script>!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var i=n(21),r=n(8),o=i.methodFactory,s=i.getLogger("cleverpush"),a=Object(r.d)().toUpperCase();function c(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"[Function]":t}),4)}function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.debug("Called %c".concat(e,"(").concat(n.map(c).join(", "),")"),"code"===(r="code")?'\n    padding: 0 1px 1px 5px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #444;\n    ':"bold"===r?"\n    font-weight: 600;\n    color: rgb(51, 51, 51);\n    ":"alert"===r?"\n    font-weight: 600;\n    color: red;\n    ":"",".");var r}s.methodFactory=function(e,t,n){var i=o(e,t,n);return function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];0===t&&"string"==typeof arguments[t]&&(n="[CleverPush][".concat(a,"] ").concat(n)),e.push(n)}i.apply(this,e)}},s.setLevel(s.getLevel(),!1)},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(7),r=n.n(i),o=n(10),s=n.n(o),a=n(5),c=n.n(a),u=n(6),l=n.n(u),f=n(11),d=n.n(f),h=n(23),p=function(e){function t(e,n){var i;return r()(this,t),(i=s()(this,c()(t).call(this,e))).name=i.constructor.name,i.reason=n,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(l()(i),i.constructor):i.stack=new Error(e).stack,i}return d()(t,e),t}(n.n(h)()(Error))},function(e,t,n){"use strict";var i,r=n(15),o=n.n(r),s=n(1),a=n.n(s),c={en:{"confirm.title":"{0} wants to send you push notifications.","confirm.nativeTitle":"{0} wants to send you notifications","confirm.info":"Notifications can be turned off anytime from browser settings.","confirm.allow":"Allow","confirm.allowChrome":"Allow","confirm.allowFirefox":"Allow Notifications","confirm.allowEdge":"Yes","confirm.deny":"Deny","confirm.selectTopics":"Which topics are you interested in?","confirm.doubleText":"Please click on {0} 2x to continue","confirm.alreadySubscribed":"You have already subscribed to all topics.","confirm.silentPromptInfo":'Please click on the small bell and then on "Allow" to continue.',"popup.info":"Click on {0} to confirm push notifications","popup.text":"Get updates and offers from {0} by subscribing to push notifications.","unsubscribe.title":"Unsubscribe from notifications","unsubscribe.confirm":"Are you sure?","unsubscribe.yes":"Yes","unsubscribe.no":"No","unsubscribe.feedback":"Please choose the unsubscribe reason to complete your unsubscription:","unsubscribe.enterReason":"Please enter the reason:","unsubscribe.submit":"Submit","unsubscribe.reasonQuantity":"Too many messages","unsubscribe.reasonContent":"Not interesting messages","unsubscribe.reasonOther":"Other reason","windowclose.confirm":"The process is not yet complete, are you sure you want to cancel it?","deny.alertHttps":"If you change your mind, click the lock to give your browser permission to send you notifications.","deny.alertHttp":"If you change your mind, click the info symbol to give your browser permission to send you notifications.","bell.subscribe":"Subscribe for notifications","bell.subscribed":"You're subscribed for notifications","bell.unsubscribeSuccess":"You won't receive notifications again","bell.hide":"Do not show again","panel.notifications":"Notifications","panel.editTopics":"Edit Topics","panel.settings":"Settings","panel.notificationsEmpty":"No notifications available.","panel.save":"Save","panel.close":"Close","panel.successfullySaved":"Successfully saved!","unblock.title":"You have blocked notifications.<br />Please follow these steps to receive notifications",privacy:"Privacy","chat.emailAddress":"Email address","chat.name":"Your name","chat.emailError":"Please enter a valid email address.","chat.start":"Start chat","chat.enable":"Enable chat now","chat.enterMessage":"Please enter message…","alert.unsupported":"Unfortunately, your browser does not support notifications.","voucherpool.title":"Your voucher code","voucherpool.text":"Click here to copy your code"},de:{"confirm.title":"{0} würde dir gerne Push Nachrichten senden.","confirm.nativeTitle":"{0} möchte Ihnen Benachrichtigungen senden","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.allowEdge":"Ja","confirm.deny":"Verbieten","confirm.selectTopics":"Welche Themen interessieren Dich?","confirm.doubleText":"Bitte bestätige 2x mit {0} um fortzufahren","confirm.alreadySubscribed":"Du hast dich bereits für alle Themen angemeldet.","confirm.silentPromptInfo":'Bitte klicke auf die kleine Glocke und dann auf "Erlauben" um fortzufahren.',"popup.info":"Klicke auf {0}, um unsere Push-Benachrichtigungen zu bestätigen","popup.text":"Erhalte Updates und Angebote von {0}, indem du Push-Benachrichtigungen abonnierst.","unsubscribe.title":"Von Benachrichtigungen abmelden","unsubscribe.confirm":"Bist du dir sicher?","unsubscribe.yes":"Ja","unsubscribe.no":"Nein","unsubscribe.feedback":"Bitte wähle den Abmelde-Grund aus um deine Abmeldung zu bestätigen:","unsubscribe.enterReason":"Bitte gib den Grund ein:","unsubscribe.submit":"Absenden","unsubscribe.reasonQuantity":"Zu viele Nachrichten","unsubscribe.reasonContent":"Uninteressante Nachrichten","unsubscribe.reasonOther":"Anderer Grund","windowclose.confirm":"Der Vorgang ist noch nicht abgeschlossen, bist du sicher, dass du ihn abbrechen möchtest?","deny.alertHttps":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"deny.alertHttp":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"bell.subscribe":"Für Benachrichtigungen anmelden","bell.subscribed":"Du bist für Benachrichtigungen angemeldet","bell.unsubscribeSuccess":"Du wirst keine Benachrichtigungen mehr erhalten","bell.hide":"Nicht mehr anzeigen","panel.notifications":"Nachrichten","panel.editTopics":"Themenbereiche bearbeiten","panel.settings":"Einstellungen","panel.notificationsEmpty":"Keine Nachrichten vorhanden.","panel.save":"Speichern","panel.close":"Schlie&szlig;en","panel.successfullySaved":"Erfolgreich gespeichert!","unblock.title":"Du hast Benachrichtigungen blockiert.<br />Bitte folge diesen Schritten um Benachrichtigungen zu empfangen",privacy:"Datenschutz","chat.emailAddress":"E-Mail Adresse","chat.name":"Dein Name","chat.emailError":"Bitte gib eine gültige E-Mail Adresse ein.","chat.start":"Chat starten","chat.enable":"Chat jetzt aktivieren","chat.enterMessage":"Bitte Nachricht eingeben…","alert.unsupported":"Dein Browser unterstützt leider keine Benachrichtigungen."},"de-formal":(i={"confirm.title":"{0} würde Ihnen gerne Push Nachrichten senden.","confirm.nativeTitle":"{0} möchte Ihnen Benachrichtigungen senden","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.allowEdge":"Ja","confirm.deny":"Verbieten","confirm.selectTopics":"Welche Themen interessieren Sie?"},a()(i,"confirm.selectTopics","Zu welchen Themen möchten Sie Push Nachrichten erhalten?"),a()(i,"confirm.doubleText","Bitte bestätigen Sie 2x mit {0} um fortzufahren"),a()(i,"confirm.alreadySubscribed","Sie haben sich bereits für alle Themen angemeldet."),a()(i,"confirm.silentPromptInfo",'Bitte klicken Sie auf die kleine Glocke und dann auf "Erlauben" um fortzufahren.'),a()(i,"popup.info","Klicken Sie auf {0}, um unsere Push-Benachrichtigungen zu bestätigen"),a()(i,"popup.text","Erhalten Sie Updates und Angebote von {0}, indem Sie Push-Benachrichtigungen abonnieren."),a()(i,"unsubscribe.title","Von Benachrichtigungen abmelden"),a()(i,"unsubscribe.confirm","Sind Sie sich sicher?"),a()(i,"unsubscribe.yes","Ja"),a()(i,"unsubscribe.no","Nein"),a()(i,"unsubscribe.feedback","Bitte wählen Sie den Abmelde-Grund aus um Ihre Abmeldung zu bestätigen:"),a()(i,"unsubscribe.enterReason","Bitte geben Sie den Grund ein:"),a()(i,"unsubscribe.submit","Absenden"),a()(i,"unsubscribe.reasonQuantity","Zu viele Nachrichten"),a()(i,"unsubscribe.reasonContent","Uninteressante Nachrichten"),a()(i,"unsubscribe.reasonOther","Anderer Grund"),a()(i,"windowclose.confirm","Der Vorgang ist noch nicht abgeschlossen, sind Sie sich sicher, dass Sie ihn abbrechen möchten?"),a()(i,"deny.alertHttps",'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.'),a()(i,"deny.alertHttp",'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.'),a()(i,"bell.subscribe","Für Benachrichtigungen anmelden"),a()(i,"bell.subscribed","Sie sind für Benachrichtigungen angemeldet"),a()(i,"bell.unsubscribeSuccess","Sie werden keine Benachrichtigungen mehr erhalten"),a()(i,"panel.notifications","Benachrichtigungen"),a()(i,"panel.editTopics","Themenbereiche bearbeiten"),a()(i,"panel.settings","Einstellungen"),a()(i,"panel.notificationsEmpty","Keine Benachrichtigungen vorhanden."),a()(i,"panel.save","Speichern"),a()(i,"panel.close","Schlie&szlig;en"),a()(i,"panel.successfullySaved","Erfolgreich gespeichert!"),a()(i,"unblock.title","Sie haben Benachrichtigungen blockiert.<br />Bitte folgen Sie diesen Schritten um Benachrichtigungen zu empfangen"),a()(i,"privacy","Datenschutz"),a()(i,"chat.emailAddress","E-Mail Adresse"),a()(i,"chat.name","Ihr Name"),a()(i,"chat.emailError","Bitte geben Sie eine gültige E-Mail Adresse ein."),a()(i,"chat.start","Chat starten"),a()(i,"chat.enable","Chat jetzt aktivieren"),a()(i,"chat.enterMessage","Bitte Nachricht eingeben…"),a()(i,"alert.unsupported","Ihr Browser unterstützt leider keine Benachrichtigungen."),a()(i,"voucherpool.title","Dein Gutscheincode"),a()(i,"voucherpool.text","Klicke hier um deinen Code zu kopieren"),i)},u=n(0);function l(e){var t=(window.CleverPush||{config:{}}).config.language||navigator.language||navigator.userLanguage||"en";t="de-formal"!==t?t.substr(0,2).toLowerCase():t,c.hasOwnProperty(t)||(t="en");var n,i=e;if("confirm.allowBrowser"===i){i="confirm.allow";var r=new o.a;"Chrome"===r.getBrowser().name?i="confirm.allowChrome":"Firefox"===r.getBrowser().name?i="confirm.allowFirefox":"Edge"===r.getBrowser().name&&(i="confirm.allowEdge")}else"deny.alert"===i&&(i="https:"===location.protocol?"deny.alertHttps":"deny.alertHttp");if(c[t].hasOwnProperty(i)?n=c[t][i]:c.en.hasOwnProperty(i)&&(n=c.en[i]),n){var s=(document.characterSet||"").toLowerCase();if(s.indexOf("windows-1252")>-1||s.indexOf("iso-8859")>-1)try{return decodeURIComponent(escape(n))}catch(e){}return n}return i}function f(e){var t=e,n=(document.characterSet||"").toLowerCase();if(n.indexOf("windows-1252")>-1||n.indexOf("iso-8859")>-1)try{t=decodeURIComponent(escape(e))}catch(e){u.a.debug(e)}return t}n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),String.prototype.formatCleverPush=function(){var e=this;for(var t in arguments)arguments.hasOwnProperty(t)&&"function"==typeof e.replace&&(e=e.replace("{".concat(t,"}"),arguments[t]));return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(7),r=n.n(i),o=n(1),s=n.n(o),a=function e(){r()(this,e)};s()(a,"INITIALIZED","initialized"),s()(a,"INITIALIZATION_FAILED","initializationFailed"),s()(a,"SUBSCRIBED","subscribed"),s()(a,"UNSUBSCRIBED","unsubscribed"),s()(a,"OPTIN_SHOWN","optInShown"),s()(a,"OPTIN_CLOSED","optInClosed"),s()(a,"PERMISSION_GRANTED","permissionGranted"),s()(a,"TOPICS_SET","topicsSet"),s()(a,"BELL_READY","bellReady"),s()(a,"PERMISSION_RE_GRANTED","permissionReGranted"),s()(a,"PANEL_SHOWN","panelShown"),s()(a,"PANEL_HIDDEN","panelHidden"),s()(a,"CONFIRM_AVAILABLE","confirmAvailable")},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return I})),n.d(t,"i",(function(){return k}));var i=n(12),r=n.n(i),o=(n(27),n(15)),s=n.n(o),a=n(2),c="serviceWorker",u="host",l="popup",f="iframe",d="customSubdomain",h=new s.a,p=h.getBrowser(),b=h.getOS(),g=h.getDevice(),v=p.version?p.version.split("."):["0"],m=p.version?parseInt(v[0],10):0;v.length>1&&parseInt(v[1],10);function y(e){if("undefined"!=typeof window){var t=e;if(t||(t=(window.CleverPush||{}).config||{}),t&&"HOST"===t.env)return u;if(window===window.top){var n=t.cleverpushDomain;if("POPUP"===t.env||location.hostname.indexOf(".cleverpush.com")>-1){if(0===location.pathname.indexOf("/subscribe"))return l}else if(n&&location.hostname.indexOf("."+n)>-1&&0===location.pathname.indexOf("/subscribe"))return l;return u}return 0===location.pathname.indexOf("/iframe")||0===location.pathname.indexOf("/referrals")?f:d}return"undefined"!=typeof WorkerLocation&&location instanceof WorkerLocation?c:null}function w(){return"undefined"!=typeof window}function S(e){return y(e)===l&&w()}function _(){return location.hostname.indexOf(".cleverpush.com")>-1&&0===location.pathname.indexOf("/unsubscribe")&&w()}function I(e){return y(e)===f&&w()}function k(){var e=!0,t=null;return new Promise((function(n,i){new Promise((function(e){var t=function(){return e(!0)},n=function(){return e(!1)};if(!window.webkitRequestFileSystem){if("MozAppearance"in document.documentElement.style){var i=indexedDB.open("test");return i.onerror=t,void(i.onsuccess=n)}if(/constructor/i.test(window.HTMLElement)||navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")<0&&navigator.userAgent.indexOf("FxiOS")<0){if(void 0!==window.openDatabase)try{window.openDatabase(null,null,null,null),window.localStorage.setItem("test",1)}catch(e){return t()}return function(){try{localStorage.length?n():(localStorage.x=1,localStorage.removeItem("x"),n())}catch(e){navigator.cookieEnabled?t():n()}}()}return window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?n():t()}window.webkitRequestFileSystem(0,0,n,t)})).then((function(o){o?(e=!1,t=null,i(new a.a("Private browsing mode not supported.","private-mode"))):("safari"in window&&"object"===r()(window.safari)&&"pushNotification"in window.safari?t="safari":void 0!==window.Notification&&("serviceWorker"in navigator||"http:"===location.protocol)?t="w3c":(e=!1,t=null,i(new a.a("Browser is not supported.","unsupported-browser"))),e&&"safari"!==t&&"ios"!==t&&("http:"===location.protocol||"showNotification"in ServiceWorkerRegistration.prototype?"PushManager"in window||(e=!1,i(new a.a("Push messaging isn't supported.","unsupported-browser"))):(e=!1,i(new a.a("Notifications aren't supported.","unsupported-browser"))),"serviceWorker"in navigator||"http:"===location.protocol||(e=!1,i(new a.a("Service workers are not supported.","unsupported-browser"))),navigator.userAgent.indexOf("Iron")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(e=!1,i(new a.a("SRWare Iron does not support push","unsupported-browser")))),e&&(window.self===window.top&&"w3c"===t&&navigator.serviceWorker&&"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(){return n(t)})).catch((function(){return i(new a.a("Service workers are not supported","unsupported-browser"))})):n(t)))}))}))}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(12),r=n(6);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(19);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){"use strict";(function(e){var i=n(24),r=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function s(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}u(t.promise,i)}else(1===e._state?u:l)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void h((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){l(e,t)}var i,r}function l(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(s);return c(this,new d(e,t,n)),n},a.prototype.finally=i.a,a.all=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){s(e,t)}),n)}i[e]=o,0==--r&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)s(a,i[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=e.length;i<r;i++)a.resolve(e[i]).then(t,n)}))},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=a}).call(this,n(30).setImmediate)},function(e,t,n){var i=n(22);function r(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},r(t,n,o||t)}e.exports=r},function(e,t,n){var i;!function(r,o){"use strict";var s="model",a="name",c="type",u="vendor",l="version",f="mobile",d="tablet",h="smarttv",p={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var n,i,r,o,s,a,c=0;c<t.length&&!s;){var u=t[c],l=t[c+1];for(n=i=0;n<u.length&&!s;)if(s=u[n++].exec(e))for(r=0;r<l.length;r++)a=s[++i],"object"==typeof(o=l[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(p.has(t[n][i],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,l],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[a,l],[/(konqueror)\/([\w\.]+)/i],[[a,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[a,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],l],[/(Avast)\/([\w\.]+)/i],[[a,"Avast Secure Browser"],l],[/(AVG)\/([\w\.]+)/i],[[a,"AVG Secure Browser"],l],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[a,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[a,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[a,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[a,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[a,l],[/(QQ)\/([\d\.]+)/i],[a,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,l],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[a,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[a,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[a],[/(LBBROWSER)/i],[a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[a,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[a,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[a,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[a,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,l],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],l],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[a,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[l,b.str,g.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[a,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[s,u,[c,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[u,"Apple"],[c,d]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[u,"Apple"],[c,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,s,[c,d]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[s,[u,"Amazon"],[c,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[s,b.str,g.device.amazon.model],[u,"Amazon"],[c,f]],[/android.+aft([bms])\sbuild/i],[s,[u,"Amazon"],[c,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,u,[c,f]],[/\((ip[honed|\s\w*]+);/i],[s,[u,"Apple"],[c,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,s,[c,f]],[/\(bb10;\s(\w+)/i],[s,[u,"BlackBerry"],[c,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[s,[u,"Asus"],[c,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[s,"Xperia Tablet"],[c,d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,"Sony"],[c,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,s,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[u,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[u,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[u,b.str,g.device.sprint.vendor],[s,b.str,g.device.sprint.model],[c,f]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[s,/_/g," "],[c,f]],[/(nexus\s9)/i],[s,[u,"HTC"],[c,d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[s,[u,"Huawei"],[c,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[s,[u,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,s,[c,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[u,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,"Microsoft"],[c,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[u,"Motorola"],[c,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[u,"Motorola"],[c,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,p.trim],[s,p.trim],[c,h]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,"Samsung"],[c,h]],[/\(dtv[\);].+(aquos)/i],[s,[u,"Sharp"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],s,[c,d]],[/smart-tv.+(samsung)/i],[u,[c,h],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],s,[c,f]],[/sie-(\w*)/i],[s,[u,"Siemens"],[c,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],s,[c,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[u,"Acer"],[c,d]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[u,"LG"],[c,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],s,[c,d]],[/(lg) netcast\.tv/i],[u,s,[c,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[u,"LG"],[c,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,s,[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[u,"Lenovo"],[c,d]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,s,[c,f]],[/linux;.+((jolla));/i],[u,s,[c,f]],[/((pebble))app\/[\d\.]+\s/i],[u,s,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,s,[c,f]],[/crkey/i],[[s,"Chromecast"],[u,"Google"],[c,h]],[/android.+;\s(glass)\s\d/i],[s,[u,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[s,[u,"Google"],[c,d]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[s,[u,"Google"],[c,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[c,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[c,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[u,"Meizu"],[c,f]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],s,[c,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[s,[u,"OnePlus"],[c,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[u,"RCA"],[c,d]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[s,[u,"Dell"],[c,d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[u,"Verizon"],[c,d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],s,[c,d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[u,"NuVision"],[c,d]],[/android.+;\s(k88)\sbuild/i],[s,[u,"ZTE"],[c,d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[u,"Swiss"],[c,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[u,"Swiss"],[c,d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[u,"Zeki"],[c,d]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],s,[c,d]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[s,[u,"Insignia"],[c,d]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[s,[u,"NextBook"],[c,d]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],s,[c,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],s,[c,f]],[/android.+;\s(PH-1)\s/i],[s,[u,"Essential"],[c,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[u,"Envizen"],[c,d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,s,[c,d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[u,"MachSpeed"],[c,d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,s,[c,d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[u,"Rotor"],[c,d]],[/android.+(KS(.+))\s+build/i],[s,[u,"Amazon"],[c,d]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,s,[c,d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,p.lowerize],u,s],[/[\s\/\(](smart-?tv)[;\)]/i],[[c,h]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[a,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[l,b.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[l,b.str,g.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[a,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[a,"Symbian"],l],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[a,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[a,l],[/(haiku)\s(\w+)/i],[a,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[a,l]]},m=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof m))return new m(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?p.extend(v,t):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return b.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return b.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};m.VERSION="0.7.21",m.BROWSER={NAME:a,MAJOR:"major",VERSION:l},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:s,VENDOR:u,TYPE:c,CONSOLE:"console",MOBILE:f,SMARTTV:h,TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:a,VERSION:l},m.OS={NAME:a,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=m),t.UAParser=m):void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i);var y=r&&(r.jQuery||r.Zepto);if(y&&!y.ua){var w=new m;y.ua=w.getResult(),y.ua.get=function(){return w.getUA()},y.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";function i(){return new Promise((function(e){if("complete"===document.readyState)e();else{var t=function t(){e(),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0)};document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)}}))}function r(){return new Promise((function(e){"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()}))}))}function o(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}function s(e,t,n){e.style.opacity=0;var i=+new Date;!function r(){var o=+e.style.opacity+(new Date-i)/t;o>1&&(o=1),e.style.opacity=o,i=+new Date,+e.style.opacity<1?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}function a(e,t,n){e.style.opacity=1;var i=+new Date;!function r(){var o=+e.style.opacity-(new Date-i)/t;o<0&&(o=0),e.style.opacity=o,i=+new Date,+e.style.opacity>0?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a}))},function(e,t,n){var i;!function(t){"use strict";function r(){}var o=r.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),r="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(r?t:{listener:t,once:!1});return this},o.on=c("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=c("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,r=this.getListenersAsObject(e);for(i in r)r.hasOwnProperty(i)&&-1!==(n=a(r[i],t))&&r[i].splice(n,1);return this},o.off=c("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},o.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},o.removeAllListeners=c("removeEvent"),o.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},o.trigger=c("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return t.EventEmitter=s,r},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}(this||{})},function(e,t,n){var i=n(22),r=n(1);function o(e,t,n,s){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var s,a=i(e,t);if(a){if((s=Object.getOwnPropertyDescriptor(a,t)).set)return s.set.call(o,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,t)){if(!s.writable)return!1;s.value=n,Object.defineProperty(o,t,s)}else r(o,t,n);return!0})(e,t,n,s)}e.exports=function(e,t,n,i,r){if(!o(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i,r;!function(o,s){"use strict";void 0===(r="function"==typeof(i=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function r(t,i){for(var r=0;r<n.length;r++){var o=n[r];this[o]=r<t?e:this.methodFactory(o,t,i)}this.log=this.debug}function o(e,n,i){return function(){typeof console!==t&&(r.call(this,n,i),this[e].apply(this,arguments))}}function s(n,r,s){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}(n)||o.apply(this,arguments)}function a(e,i,o){var a,c=this,u="loglevel";function l(){var e;if(typeof window!==t){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(u)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(u+=":"+e),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||s,c.getLevel=function(){return a},c.setLevel=function(i,o){if("string"==typeof i&&void 0!==c.levels[i.toUpperCase()]&&(i=c.levels[i.toUpperCase()]),!("number"==typeof i&&i>=0&&i<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+i;if(a=i,!1!==o&&function(e){var i=(n[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[u]=i)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+i+";"}catch(e){}}}(i),r.call(c,i,e),typeof console===t&&i<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){l()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var f=l();null==f&&(f=null==i?"WARN":i),c.setLevel(f,!1)}var c=new a,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new a(e,c.getLevel(),c.methodFactory)),t};var l=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=l),c},c.getLoggers=function(){return u},c})?i.call(t,n,t,e):i)||(e.exports=r)}()},function(e,t,n){var i=n(5);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,n){var i=n(5),r=n(19),o=n(28),s=n(29);function a(t){var n="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return s(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},a(t)}e.exports=a},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Panel}));var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_utils_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_utils_translate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_utils_debug__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),_const_event__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4),Panel=function(){function Panel(e,t,n,i){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,Panel),this.config=e,this.subscriptionManager=t,this.triggerEvent=n,this.api=i,__webpack_require__(!function(){var e=new Error("Cannot find module './panel.scss'");throw e.code="MODULE_NOT_FOUND",e}()),this.tab=e.hidePanelNotifications?"settings":"notifications"}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Panel,[{key:"show",value:function(){if(!this.panel){var e="cleverpush-panel";e+=" cleverpush-panel-position-"+(this.config.notificationBellPosition||"left"),document.querySelector("body").appendChild(Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.a)('<div class="'+e+'"><button class="cleverpush-panel-close" type="button">&times;</button><div class="cleverpush-panel-content"></div></div>'))}this.panel=document.querySelector(".cleverpush-panel"),this.closeButton=this.panel.querySelector(".cleverpush-panel-close"),this.closeButton&&this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.showPanelContent(),this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_5__.a.PANEL_SHOWN),this.api&&this.api.trackPanel(null,"opened")}},{key:"hide",value:function(){this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.panel=null,this.closeButton=null,this.footerCloseButton=null,this.tabButtons=null,this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_5__.a.PANEL_HIDDEN)}},{key:"onCloseClick",value:function(e){e.preventDefault(),this.hide()}},{key:"onUnsubscribeClick",value:function(e){confirm(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("unsubscribe.confirm"))&&(this.onCloseClick(e),this.subscriptionManager.unsubscribe())}},{key:"setTab",value:function(e){this.tab=e,this.showPanelContent()}},{key:"onTabButtonClick",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_4__.b)("onTabButtonClick",e.currentTarget.dataset.tab),e.preventDefault(),this.setTab(e.currentTarget.dataset.tab||"notifications")}},{key:"openNotification",value:function(e){e.preventDefault(),window.open(e.currentTarget.dataset.url,"_blank"),this.api&&this.api.trackPanel(e.currentTarget.dataset.id,"clicked")}},{key:"timeString",value:function(e){var t=e.toISOString().substring(0,10);t+=" ";var n=e.getHours();n<10&&(n="0"+n);var i=e.getMinutes();return i<10&&(i="0"+i),t+=n+":"+i}},{key:"showPanelContent",value:function showPanelContent(){var _this=this,panelContent=this.panel.querySelector(".cleverpush-panel-content"),content=this.config.hidePanelNotifications?"":'<div class="cleverpush-panel-buttons">\n<button type="button" class="cleverpush-panel-button'.concat("notifications"===this.tab?" active":"",'" data-tab="notifications">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.notifications"),"</button>")+'<button type="button" class="cleverpush-panel-button'.concat("settings"===this.tab?" active":"",'" data-tab="settings">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.settings"),"</button>")+"</div>";this.config.notificationBellColor&&(content+="<style>.cleverpush-panel-button.active, .cleverpush-panel-button:hover, .cleverpush-panel-settings button, .cleverpush-panel-settings button:hover, .cleverpush-panel-footer button, .cleverpush-panel-footer button:hover { background-color: "+this.config.notificationBellColor+"; }</style>"),content+='\n    <div class="cleverpush-panel-header" style="border-bottom-color: '.concat(this.config.notificationBellColor||"",'"><img src="').concat(this.config.channelIcon,'"></div>\n    ');var setPanelContent=function(e){panelContent.innerHTML=e+'<div class="cleverpush-panel-footer"><button type="button" class="cleverpush-panel-footer-close">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.close"),'</button><div class="cleverpush-panel-branding">').concat(_this.getBrandingLinks(),"</div></div>"),_this.footerCloseButton=_this.panel.querySelector(".cleverpush-panel-footer-close"),_this.footerCloseButton&&_this.footerCloseButton.addEventListener("click",_this.onCloseClick.bind(_this)),_this.tabButtons=_this.panel.querySelectorAll(".cleverpush-panel-button");for(var t=0;t<_this.tabButtons.length;t+=1){_this.tabButtons[t].addEventListener("click",_this.onTabButtonClick.bind(_this))}_this.notificationItems=_this.panel.querySelectorAll(".cleverpush-panel-notification");for(var n=0;n<_this.notificationItems.length;n+=1){_this.notificationItems[n].addEventListener("click",_this.openNotification.bind(_this))}};if("notifications"===this.tab)content+='<div class="cleverpush-panel-spinner"><div class="spinner">\n                <div class="double-bounce1"></div>\n                <div class="double-bounce2"></div>\n            </div></div>',setPanelContent(content),this.subscriptionManager.getStoredNotifications().then((function(e){e.length?(content+='<div class="cleverpush-panel-notifications" style="display: none;">',e.slice(0,50).forEach((function(e){e.testVariants&&e.testVariants.length&&e.testVariants[0]&&(!e.title&&e.testVariants[0].title&&(e.title=e.testVariants[0].title),!e.text&&e.testVariants[0].text&&(e.text=e.testVariants[0].text),e.testVariants[0].url&&(e.url=e.testVariants[0].url)),content+='<div class="cleverpush-panel-notification" data-url="'.concat(e.url,'" data-id="').concat(e._id,'">'),content+='<div class="cleverpush-panel-notification-image" style="background-image: url(\''.concat(e.mediaUrl||e.iconUrl||_this.config.channelIcon,"');\"></div>"),content+='<div class="cleverpush-panel-notification-title">'.concat(e.title,"</div>"),e.text&&(e.text.length>100&&(e.text=e.text.substr(0,100)+"…"),content+='<div class="cleverpush-panel-notification-text">'.concat(e.text,"</div>")),e.createdAt&&(content+='<div class="cleverpush-panel-notification-time">'.concat(_this.timeString(new Date(e.queuedAt||e.scheduledAt||e.createdAt)),"</div>")),content+="</div>"})),content+="</div>"):content+='<div class="cleverpush-panel-notifications-empty">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.notificationsEmpty"),"</div>"),setPanelContent(content);var t=panelContent.querySelector(".cleverpush-panel-spinner"),n=panelContent.querySelector(e.length?".cleverpush-panel-notifications":".cleverpush-panel-notifications-empty");t&&n&&Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.e)(t,150,(function(){t.style.display="none",n.style.opacity=0,n.style.display="block",Object(_utils_dom__WEBPACK_IMPORTED_MODULE_2__.d)(n,150)}))}));else if("settings"===this.tab){var topicsContent,setSettingsContent=function setSettingsContent(){if(content+='<div class="cleverpush-panel-settings">'.concat(topicsContent||"",'<div class="cleverpush-panel-unsubscribe">')+'<button type="button" class="cleverpush-panel-unsubscribe-button">'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("unsubscribe.title")+"</button></div></div>",setPanelContent(content),_this.unsubscribeButton=_this.panel.querySelector(".cleverpush-panel-unsubscribe-button"),_this.unsubscribeButton&&_this.unsubscribeButton.addEventListener("click",_this.onUnsubscribeClick.bind(_this)),topicsContent){if(_this.config.topicsTemplateFunction&&topicsContent){var topicsDiv=panelContent.querySelector(".cleverpush-topics");if(topicsDiv)try{var templateFunc=eval("("+_this.config.topicsTemplateFunction+")");"function"==typeof templateFunc&&_this.subscriptionManager.getTopics().then((function(e){templateFunc(topicsDiv,_this.config,e,"panel"),_this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]')}))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_4__.a.error(e)}}else _this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topic-selection input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]');_this.saveTopicsButton=_this.panel.querySelector(".cleverpush-panel-save-topics-button"),_this.saveTopicsButton&&_this.saveTopicsButton.addEventListener("click",_this.saveTopics.bind(_this))}};this.config.channelTopics&&this.config.channelTopics.length?this.config.topicsTemplateFunction?(topicsContent="<div><h3>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.editTopics"),'</h3><div class="cleverpush-topics cleverpush-panel-topics"></div><div class="cleverpush-panel-save-topics"><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),"</div></button>"),setSettingsContent()):this.subscriptionManager.getTopics().then((function(e){var t=_this.config.channelTopics.filter((function(e){return!e.parentTopic}));topicsContent="".concat('<div class="cleverpush-topics cleverpush-panel-topics"><h3>'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.editTopics")+'</h3><div class="cleverpush-panel-topic-selection">').concat(t.sort((function(e,t){return e.sort-t.sort})).map((function(t){var n=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.a)(t.name),i=_this.config.channelTopics.filter((function(e){return e.parentTopic===t._id})),r='<div class="cleverpush-panel-topic '.concat(i.length?"topic-has-children":"",'"><label><input type="').concat(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(t._id,'"').concat(e&&e.indexOf(t._id)>-1?' checked="checked"':"","> ").concat(n,"</label></div>");return i.length&&i.forEach((function(n){var i=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.a)(n.name),o=_this.config.confirmAlertRadioButtonTopics||t.childTopicsRadioButtons?"radio":"checkbox";r+='<div class="topic-child" data-parent-topic="'.concat(t._id,'" style="margin-left: 20px; font-size: 90%; ').concat("",'"><label><input type="').concat(o,'" name="topics[]" value="').concat(n._id,'" ').concat(e&&e.indexOf(n._id)>-1?' checked="checked"':"","> ").concat(i,"</label></div>")})),r})).join(""),'</div><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),"</button>")+"</div>",setSettingsContent()})):setSettingsContent()}}},{key:"getBrandingLinks",value:function(){var e=[];return this.config.hideBranding||("convertpush.io"===this.config.cleverpushDomain?e.push('<a href="https://convertpush.io/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by ConvertPush</a>')):e.push('<a href="https://cleverpush.com/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by CleverPush</a>'))),this.config.privacyPolicyUrl&&e.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.privacyPolicyText||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&e.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.faqText||"FAQ","</a>")),e.join(" &nbsp;/&nbsp; ")}},{key:"saveTopics",value:function(e){var t=this;if(e.preventDefault(),!this.savingTopics){this.savingTopics=!0,this.saveTopicsButton.innerHTML+="...",this.saveTopicsButton.disabled=!0;var n=[];if(this.topicCheckboxes=this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]'),this.topicCheckboxes&&this.topicCheckboxes.length)for(var i=0;i<this.topicCheckboxes.length;i+=1){var r=this.topicCheckboxes[i];r.checked&&n.push(r.value)}var o=function(e){t.saveTopicsButton.disabled=!1,e?(t.saveTopicsButton.innerHTML="<span>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.successfullySaved"),"</span>"),setTimeout((function(){t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),t.savingTopics=!1}),2e3)):(t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_3__.b)("panel.save"),t.savingTopics=!1)};this.subscriptionManager.setTopics(n).then((function(){t.subscriptionManager.sync().then((function(){o(!0)})).catch((function(){o(!1)}))})).catch((function(){o(!1)}))}}}]),Panel}()},function(e,t,n){e.exports=n(33)},function(e,t,n){(function(t){var n;e.exports=function e(t,i,r){function o(a,c){if(!i[a]){if(!t[a]){if(!c&&"function"==typeof n&&n)return n(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[a]={exports:{}};t[a][0].call(l.exports,(function(e){var n=t[a][1][e];return o(n||e)}),l,l.exports,e,t,i,r)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,i){(function(e){"use strict";var t,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,s=new r(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),t=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,t=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;i=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}i=!1}n.exports=function(e){1!==u.push(e)||i||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var i=e(1);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==r&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){i((function(){var i;try{i=t(n)}catch(t){return o.reject(e,t)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function i(t){n||(n=!0,o.reject(e,t))}function r(t){n||(n=!0,o.resolve(e,t))}var s=p((function(){t(r,i)}));"error"===s.status&&i(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(r);return this.state!==c?f(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var i=n.value;if(i)h(e,i);else{e.state=a,e.outcome=t;for(var r=-1,s=e.queue.length;++r<s;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(r),e)},u.reject=function(e){var t=new this(r);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,u=new this(r);++c<n;)l(e[c],c);return u;function l(e,r){t.resolve(e).then((function(e){s[r]=e,++a!==n||i||(i=!0,o.resolve(u,s))}),(function(e){i||(i=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var s,a=-1,c=new this(r);++a<n;)s=e[a],t.resolve(s).then((function(e){i||(i=!0,o.resolve(c,e))}),(function(e){i||(i=!0,o.reject(c,e))}));return c}},{1:1}],3:[function(e,n,i){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,b="readonly",g="readwrite";function v(e){return"boolean"==typeof d?s.resolve(d):function(e){return new s((function(t){var n=e.transaction(f,g),i=o([""]);n.objectStore(f).put(i,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function m(e){var t=h[e.name],n={};n.promise=new s((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function y(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new s((function(n,i){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);m(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=r.open.apply(r,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),i(s.error)},s.onsuccess=function(){n(s.result),y(e)}}))}function _(e){return S(e,!1)}function I(e){return S(e,!0)}function k(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,r=e.version>e.db.version;if(i&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function E(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),r=0;r<t;r++)i[r]=e.charCodeAt(r);return n}(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function O(e,t,n,i){void 0===i&&(i=1);try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(i>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),I(e)})).then((function(){return function(e){m(e);for(var t=h[e.name],n=t.forages,i=0;i<n.length;i++){var r=n[i];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,_(e).then((function(t){return e.db=t,k(e)?I(e):t})).then((function(i){e.db=t.db=i;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=i})).catch((function(t){throw w(e,t),t}))}(e).then((function(){O(e,t,n,i-1)}))})).catch(n);n(r)}}var C={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]=e[i];var r=h[n.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var o=[];function a(){return s.resolve()}for(var c=0;c<r.forages.length;c++){var u=r.forages[c];u!==t&&o.push(u._initReady().catch(a))}var l=r.forages.slice(0);return s.all(o).then((function(){return n.db=r.db,_(n)})).then((function(e){return n.db=e,k(n,t._defaultConfig.version)?I(n):e})).then((function(e){n.db=r.db=e,t._dbInfo=n;for(var i=0;i<l.length;i++){var o=l[i];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!r)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=new s((function(t,i){n.ready().then((function(){O(n._dbInfo,b,(function(r,o){if(r)return i(r);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var i=n.value;P(i)&&(i=E(i));var r=e(i,n.key,a++);void 0!==r?t(r):n.continue()}else t()},s.onerror=function(){i(s.error)}}catch(e){i(e)}}))})).catch(i)}));return a(i,t),i},getItem:function(e,t){var n=this;e=u(e);var i=new s((function(t,i){n.ready().then((function(){O(n._dbInfo,b,(function(r,o){if(r)return i(r);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),P(e)&&(e=E(e)),t(e)},s.onerror=function(){i(s.error)}}catch(e){i(e)}}))})).catch(i)}));return a(i,t),i},setItem:function(e,t,n){var i=this;e=u(e);var r=new s((function(n,r){var o;i.ready().then((function(){return o=i._dbInfo,"[object Blob]"===p.call(t)?v(o.db).then((function(e){return e?t:(n=t,new s((function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(t){var i=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):t})).then((function(t){O(i._dbInfo,g,(function(o,s){if(o)return r(o);try{var a=s.objectStore(i._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return a(r,n),r},removeItem:function(e,t){var n=this;e=u(e);var i=new s((function(t,i){n.ready().then((function(){O(n._dbInfo,g,(function(r,o){if(r)return i(r);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){i(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return a(i,t),i},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){O(t._dbInfo,g,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){O(t._dbInfo,b,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,i=new s((function(t,i){e<0?t(null):n.ready().then((function(){O(n._dbInfo,b,(function(r,o){if(r)return i(r);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,c=s.openCursor();c.onsuccess=function(){var n=c.result;n?0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){i(c.error)}}catch(e){i(e)}}))})).catch(i)}));return a(i,t),i},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){O(t._dbInfo,b,(function(i,r){if(i)return n(i);try{var o=r.objectStore(t._dbInfo.storeName).openCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,i=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||i.name,e.storeName=e.storeName||i.storeName),e.name){var o=e.name===i.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):_(e).then((function(t){var n=h[e.name],i=n.forages;n.db=t;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;m(e);var i=h[e.name],o=i.forages;t.close();for(var a=0;a<o.length;a++){var c=o[a];c._dbInfo.db=null,c._dbInfo.version=n}return new s((function(t,i){var o=r.open(e.name,n);o.onerror=function(e){o.result.close(),i(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){i.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,y(n._dbInfo)}})).catch((function(t){throw(w(e,t)||s.resolve()).catch((function(){})),t}))}})):o.then((function(t){m(e);var n=h[e.name],i=n.forages;t.close();for(var o=0;o<i.length;o++)i[o]._dbInfo.db=null;return new s((function(t,n){var i=r.deleteDatabase(e.name);i.onerror=i.onblocked=function(e){var t=i.result;t&&t.close(),n(e)},i.onsuccess=function(){var e=i.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++)y(i[t]._dbInfo)})).catch((function(t){throw(w(e,t)||s.resolve()).catch((function(){})),t}))}))}else n=s.reject("Invalid arguments");return a(n,t),n}},N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="~~local_forage_type~",B=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",x=M.length,D="arbf",L="blob",R="si08",j="ui08",U="uic8",W="si16",F="si32",q="ur16",z="ui32",V="fl32",H="fl64",K=x+D.length,G=Object.prototype.toString;function J(e){var t,n,i,r,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),l=new Uint8Array(u);for(t=0;t<a;t+=4)n=N.indexOf(e[t]),i=N.indexOf(e[t+1]),r=N.indexOf(e[t+2]),o=N.indexOf(e[t+3]),l[c++]=n<<2|i>>4,l[c++]=(15&i)<<4|r>>2,l[c++]=(3&r)<<6|63&o;return u}function Z(e){var t,n=new Uint8Array(e),i="";for(t=0;t<n.length;t+=3)i+=N[n[t]>>2],i+=N[(3&n[t])<<4|n[t+1]>>4],i+=N[(15&n[t+1])<<2|n[t+2]>>6],i+=N[63&n[t+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var Y={serialize:function(e,t){var n="";if(e&&(n=G.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===G.call(e.buffer))){var i,r=M;e instanceof ArrayBuffer?(i=e,r+=D):(i=e.buffer,"[object Int8Array]"===n?r+=R:"[object Uint8Array]"===n?r+=j:"[object Uint8ClampedArray]"===n?r+=U:"[object Int16Array]"===n?r+=W:"[object Uint16Array]"===n?r+=q:"[object Int32Array]"===n?r+=F:"[object Uint32Array]"===n?r+=z:"[object Float32Array]"===n?r+=V:"[object Float64Array]"===n?r+=H:t(new Error("Failed to get type for BinaryArray"))),t(r+Z(i))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=A+e.type+"~"+Z(this.result);t(M+L+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,x)!==M)return JSON.parse(e);var t,n=e.substring(K),i=e.substring(x,K);if(i===L&&B.test(n)){var r=n.match(B);t=r[1],n=n.substring(r[0].length)}var s=J(n);switch(i){case D:return s;case L:return o([s],{type:t});case R:return new Int8Array(s);case j:return new Uint8Array(s);case U:return new Uint8ClampedArray(s);case W:return new Int16Array(s);case q:return new Uint16Array(s);case F:return new Int32Array(s);case z:return new Uint32Array(s);case V:return new Float32Array(s);case H:return new Float64Array(s);default:throw new Error("Unkown type: "+i)}},stringToBuffer:J,bufferToString:Z};function Q(e,t,n,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function X(e,t,n,i,r,o){e.executeSql(n,i,r,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):Q(e,t,(function(){e.executeSql(n,i,r,o)}),o)}),o):o(e,s)}),o)}function $(e,t,n,i){var r=this;e=u(e);var o=new s((function(o,s){r.ready().then((function(){void 0===t&&(t=null);var a=t,c=r._dbInfo;c.serializer.serialize(t,(function(t,u){u?s(u):c.db.transaction((function(n){X(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(i>0)return void o($.apply(r,[e,a,n,i-1]));s(t)}}))}))})).catch(s)}));return a(o,n),o}var ee={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var i in e)n[i]="string"!=typeof e[i]?e[i].toString():e[i];var r=new s((function(e,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return i(e)}n.db.transaction((function(r){Q(r,n,(function(){t._dbInfo=n,e()}),(function(e,t){i(t)}))}),i)}));return n.serializer=Y,r},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,i=new s((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){X(n,r,"SELECT * FROM "+r.storeName,[],(function(n,i){for(var o=i.rows,s=o.length,a=0;a<s;a++){var c=o.item(a),u=c.value;if(u&&(u=r.serializer.deserialize(u)),void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,t),i},getItem:function(e,t){var n=this;e=u(e);var i=new s((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){X(n,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,t),i},setItem:function(e,t,n){return $.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var i=new s((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){X(n,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,t),i},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){X(t,i,"DELETE FROM "+i.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){X(t,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(t,n){var i=n.rows.item(0).c;e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,i=new s((function(t,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){X(n,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var i=n.rows.length?n.rows.item(0).key:null;t(i)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,t),i},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){X(t,i,"SELECT key FROM "+i.storeName,[],(function(t,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);e(i)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var i,r=this;return a(i=e.name?new s((function(t){var i;i=e.name===n.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:i,storeNames:[e.storeName]}):t(function(e){return new s((function(t,n){e.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var r=[],o=0;o<i.rows.length;o++)r.push(i.rows.item(o).name);t({db:e,storeNames:r})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(i))})).then((function(e){return new s((function(t,n){e.db.transaction((function(i){function r(e){return new s((function(t,n){i.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,c=e.storeNames.length;a<c;a++)o.push(r(e.storeNames[a]));s.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):s.reject("Invalid arguments"),t),i}};function te(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function ne(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var ie={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=te(e,this._defaultConfig),ne()?(this._dbInfo=t,t.serializer=Y,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,i=n.ready().then((function(){for(var t=n._dbInfo,i=t.keyPrefix,r=i.length,o=localStorage.length,s=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(i)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(r),s++)))return u}}}));return a(i,t),i},getItem:function(e,t){var n=this;e=u(e);var i=n.ready().then((function(){var t=n._dbInfo,i=localStorage.getItem(t.keyPrefix+e);return i&&(i=t.serializer.deserialize(i)),i}));return a(i,t),i},setItem:function(e,t,n){var i=this;e=u(e);var r=i.ready().then((function(){void 0===t&&(t=null);var n=t;return new s((function(r,o){var s=i._dbInfo;s.serializer.serialize(t,(function(t,i){if(i)o(i);else try{localStorage.setItem(s.keyPrefix+e,t),r(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return a(r,n),r},removeItem:function(e,t){var n=this;e=u(e);var i=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(i,t),i},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(e)&&localStorage.removeItem(i)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,i=n.ready().then((function(){var t,i=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(i.keyPrefix.length)),t}));return a(i,t),i},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&i.push(o.substring(e.keyPrefix.length))}return i}));return a(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var i,r=this;return a(i=e.name?new s((function(t){e.storeName?t(te(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments"),t),i}},re=function(e,t){for(var n,i,r=e.length,o=0;o<r;){if((n=e[o])===(i=t)||"number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))return!0;o++}return!1},oe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},se={},ae={},ce={INDEXEDDB:C,WEBSQL:ee,LOCALSTORAGE:ie},ue=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],le=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),de={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function he(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(oe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var be=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce)if(ce.hasOwnProperty(n)){var i=ce[n],r=i._driver;this[n]=r,se[r]||this.defineDriver(i)}this._defaultConfig=pe({},de),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":i(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var i=new s((function(t,n){try{var i=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(r);for(var o=fe.concat("_initStorage"),c=0,u=o.length;c<u;c++){var l=o[c];if((!re(le,l)||e[l])&&"function"!=typeof e[l])return void n(r)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=s.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,i=le.length;n<i;n++){var r=le[n];e[r]||(e[r]=t(r))}}();var f=function(n){se[i]&&console.info("Redefining LocalForage driver: "+i),se[i]=e,ae[i]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return c(i,t,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var i=se[e]?s.resolve(se[e]):s.reject(new Error("Driver not found."));return c(i,t,n),i},e.prototype.getSerializer=function(e){var t=s.resolve(Y);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var i=this;oe(e)||(e=[e]);var r=this._getSupportedDrivers(e);function o(){i._config.driver=i.driver()}function a(e){return i._extend(e),o(),i._ready=i._initStorage(i._config),i._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=u.then((function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then((function(e){i._driver=e._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var r=e[t];return t++,i._dbInfo=null,i._ready=null,i.getDriver(r).then(a).catch(n)}o();var c=new Error("No available storage method found.");return i._driverSet=s.reject(c),i._driverSet}()}}(r)}))})).catch((function(){o();var e=new Error("No available storage method found.");return i._driverSet=s.reject(e),i._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ae[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)he(this,fe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=be},{3:3}]},{},[4])(4)}).call(this,n(20))},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var i=n(19);function r(t,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?e.exports=r=function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}:e.exports=r=Reflect.construct,r.apply(null,arguments)}e.exports=r},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(31),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(20))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,s,a,c=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(r=f.documentElement,i=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,i(c),c++},d.clearImmediate=h}function h(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(20),n(32))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var i=n(12),r=n.n(i),o=n(7),s=n.n(o),a=n(9),c=n.n(a),u=n(10),l=n.n(u),f=n(5),d=n.n(f),h=n(11),p=n.n(h),b=n(17),g=n.n(b),v=n(0),m=n(15),y=n.n(m),w=n(13),S=n(2);function _(e){return new Promise((function(t){return e.json().then((function(n){return t({status:e.status,ok:e.ok,json:n})})).catch((function(){return t({status:e.status,ok:e.ok,json:null})}))}))}function I(e,t){return new Promise((function(n,i){(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("request timeout"))}),n)}))])})(e,t,t.timeout||1e4).then(_).then((function(e){return e.ok?n(e.json):i(new S.a(e.json?e.json.error:"HTTP Error",e.status))})).catch((function(e){return i(e)}))}))}var k=[],E=!0;if("function"==typeof __tcfapi&&"object"===("undefined"==typeof UC_UI?"undefined":r()(UC_UI))){var P=function(){return UC_UI.getServices().find((function(e){return e.name&&(e.name||"").toLowerCase().indexOf("cxense")>-1||(e.name||"").toLowerCase().indexOf("piano dmp")>-1}))};E=!1;var T=P();T&&(E=T.consent.status),__tcfapi("addEventListener",2,(function(e){if(e&&(T=P())){var t=T.consent.status;t!==E&&(E=t,k.forEach((function(e){return"function"==typeof e&&e(E)})))}}))}var O=function(){function e(t){s()(this,e),this.channelId=t,this.confirmAlertTestId=void 0,this.endpoint="https://api.cleverpush.com",this.regionEnabled=!1}return c()(e,[{key:"setConfirmAlertTestId",value:function(e){this.confirmAlertTestId=e}},{key:"request",value:function(e,t,n){Object(v.b)("request",e,t,n);var i={method:"GET",headers:{Accept:"application/json"}};return e&&(i.method=e),n&&(i.body=JSON.stringify(Object.assign({sdkVersion:"1.0.0"},n)),i.headers["Content-Type"]="application/json"),I(this.endpoint+t,i)}},{key:"getChannelConfig",value:function(e){var t="/channel/".concat(this.channelId,"/config");if(void 0!==e&&e){t+="?confirmAlertTestsEnabled=true";var n=new y.a(navigator.userAgent).getOS();n.name&&(t+="&platformName="+n.name)}return this.request("GET",t,null)}},{key:"tagSubscription",value:function(e,t){return this.request("POST","/subscription/tag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"untagSubscription",value:function(e,t){return this.request("POST","/subscription/untag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"setSubscriptionAttribute",value:function(e,t,n){return this.request("POST","/subscription/attribute",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pushSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/push-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pullSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/pull-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"triggerFollowUpEvent",value:function(e,t,n,i,r,o,s){var a={channelId:this.channelId,subscriptionId:e,campaignId:t,notificationId:n,name:i,parameters:r,fromNotification:o,bypassInactive:s};if("articleBounce"===i&&"function"==typeof navigator.sendBeacon){var c=new Blob([JSON.stringify(a)],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/subscription/event",c)}return this.request("POST","/subscription/event",a)}},{key:"trackConversion",value:function(e,t,n,i,r,o){return this.request("POST","/subscription/conversion",{channelId:this.channelId,subscriptionId:e,notificationId:t,eventId:n,amount:i,followUpCampaignId:r,currency:o})}},{key:"trackWidget",value:function(e,t){return this.request("POST","/channel/"+this.channelId+"/widget/"+t,{channelId:this.channelId,widgetId:e})}},{key:"trackPanel",value:function(e,t){return this.request("POST","/channel/"+this.channelId+"/panel/"+t,{channelId:this.channelId,notificationId:e})}},{key:"trackBounce",value:function(e){var t=Object.assign({channelId:this.channelId},e||{}),n=new y.a(navigator.userAgent),i=n.getBrowser(),r=n.getOS();if(t.platformName=r.name||void 0,t.browserType=i.name||void 0,"function"==typeof navigator.sendBeacon){var o=new Blob([JSON.stringify(t)],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/notification/bounced",o)}return this.request("POST","/notification/bounced",t)}},{key:"getSyncParameters",value:function(e){Object(v.b)("getSyncParameters");var t=new y.a(navigator.userAgent),n=t.getBrowser(),i=t.getOS(),r=(n.version||"").split(".")[0],o=(i.version||"").split(".")[0],s={channelId:this.channelId,browserType:n.name||void 0,browserVersion:r||n.version||void 0,platformName:i.name||void 0,platformVersion:o||i.version||void 0},a=location.pathname;a&&(s.pathname=a);try{if("undefined"!=typeof sessionStorage){var c=sessionStorage.getItem("cleverpush-referrer")||document.referrer.split("?")[0];c&&(s.referrer=c);var u=sessionStorage.getItem("cleverpush-referral-subscription-id");u&&(s.referralSubscriptionId=u)}if("undefined"!=typeof localStorage){var l=localStorage.getItem("cleverpush-visits")||0;isNaN(l)||(s.visits=l+""),"was-denied"!==localStorage.getItem("subscription-status")&&"denied"!==localStorage.getItem("subscription-status")||(s.wasDenied=!0)}}catch(e){}var f=(navigator.language||navigator.userLanguage||"").substr(0,2);if(f&&(s.language=f),this.confirmAlertTestId&&(s.confirmAlertTestId=this.confirmAlertTestId),this.testSubscription&&(s.testSubscription=this.testSubscription),self.CleverPush&&self.CleverPush.config&&self.CleverPush.config.pianoEnabled&&self.CleverPush.config.pianoPublicPersistedId)try{E?"undefined"!=typeof cX&&(s.pianoUserId=cX.getUserId(),s.pianoSegments=cX.getUserSegmentIds({persistedQueryId:self.CleverPush.config.pianoPublicPersistedId})):(s.pianoUserId="optout",s.pianoSegments=[])}catch(e){v.a.debug(e)}return void 0!==e&&e?s:new w.a((function(e){I("https://geoip-api.cleverpush.com/",{mode:"cors",timeout:3e3}).then((function(t){e(Object.assign(s,t))})).catch((function(t){v.a.error(t),e(s)}))}))}},{key:"syncSubscription",value:function(e,t,n,i){var o=this;if(Object(v.b)("syncSubscription",e,t),!e)return w.a.reject();var s="object"===r()(i)?i:{};return this.getSyncParameters().then((function(i){s=Object.assign(s,i);var a=parseInt(s.browserVersion,10);if(o.regionEnabled||delete s.region,"object"===r()(t)&&t&&!isNaN(t.length)){var c=0;try{var u=localStorage.getItem("cleverpush-topics-version");u&&!isNaN(u)&&(c=parseInt(u,10))}catch(e){}c+=1,s.topics=t,s.topicsVersion=c}if("object"===r()(n)&&n&&n.length&&(s.tags=n),s.existingPermission&&delete s.confirmAlertTestId,o.fromBellWidget&&(s.fromBellWidget=o.fromBellWidget),o.widgetId&&(s.widgetId=o.widgetId),e.facebookUserRef&&(s.facebookUserRef=e.facebookUserRef,"undefined"!=typeof self&&self.CleverPush&&self.CleverPush.config&&self.CleverPush.config.multiChannels&&self.CleverPush.config.multiChannels.facebookChannel._id!==s.channelId&&(s.channelId=self.CleverPush.config.multiChannels.facebookChannel._id)),"Safari"===s.browserType&&"object"===r()(e)&&e.deviceToken)s.apnsToken=e.deviceToken;else if("string"==typeof e)s.subscriptionId=e;else if("Chrome"===s.browserType&&a>=42&&a<50)s.endpoint=e.endpoint;else if(s.endpoint=e.endpoint,void 0!==e.getKey){var l=e.getKey?e.getKey("p256dh"):null,f=null;("Firefox"!==s.browserType||"Firefox"===s.browserType&&a>=46)&&(f=e.getKey?e.getKey("auth"):null),l&&(s.publicKey=btoa(String.fromCharCode.apply(null,new Uint8Array(l)))),f&&(s.authSecret=btoa(String.fromCharCode.apply(null,new Uint8Array(f))))}return new w.a((function(e,t){return o.request("POST","/subscription/sync/".concat(o.channelId),s).then((function(n){n&&n.id?e(n):n&&n.error?t(n.error):t()})).catch((function(e){e.reason?t(e.reason):e.status?t(e.status):t(e)}))}))}))}},{key:"unsubscribe",value:function(e){var t=this;return new w.a((function(n){t.request("POST","/subscription/unsubscribe",{subscriptionId:e,channelId:t.channelId}).then(n).catch(n)}))}},{key:"unsubscribeFeedback",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new w.a((function(i){t.request("POST","/subscription/unsubscribe/feedback",{type:e,text:n,channelId:t.channelId}).then(i).catch(i)}))}},{key:"startSession",value:function(e,t){var n=this;return new w.a((function(i){n.request("POST","/subscription/session/start",Object.assign({},{subscriptionId:e,channelId:n.channelId},t||{})).then(i).catch(i)}))}},{key:"endSession",value:function(e,t){var n=new Blob([JSON.stringify(Object.assign({subscriptionId:e,channelId:this.channelId},t))],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/subscription/session/end",n)}},{key:"trackSessionImpression",value:function(e,t){var n=this;return new w.a((function(i){n.request("POST","/subscription/session/impression",Object.assign({},{subscriptionId:e,notificationId:t,channelId:n.channelId})).then(i).catch(i)}))}},{key:"confirmAlertShown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirm-alert",n=!0,i="cleverpush-"+t+"-reported",r=2,o=sessionStorage.getItem(i);if(o){var s=parseInt(o,10);isNaN(s)||(n=s+36e5*r<Date.now())}if(n){sessionStorage.setItem(i,Date.now());var a={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId},c=new y.a(navigator.userAgent),u=c.getBrowser(),l=c.getOS();if(a.platformName=l.name||void 0,a.browserType=u.name||void 0,void 0!==e&&e&&(a.existingPermission=!0,delete a.confirmAlertTestId),"undefined"!=typeof window&&window.CleverPush&&window.CleverPush.config.trackOptInPathnames){var f=location.pathname;f&&(a.pathname=f)}if(this.widgetId&&(a.widgetId=this.widgetId),"undefined"!=typeof window&&window.CleverPush&&window.CleverPush.config.trackOptInReferrers)try{if("undefined"!=typeof sessionStorage){var d=sessionStorage.getItem("cleverpush-referrer")||document.referrer.split("?")[0];d&&(a.referrer=d)}}catch(e){}return"undefined"==typeof localStorage||"was-denied"!==localStorage.getItem("subscription-status")&&"denied"!==localStorage.getItem("subscription-status")||(a.wasDenied=!0),this.request("POST","/channel/"+t,a)}return w.a.resolve()}},{key:"trackOptInVisitor",value:function(){var e={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId};return this.widgetId&&(e.widgetId=this.widgetId),this.request("POST","/channel/optin-visitor",e)}},{key:"confirmAlertDenied",value:function(){var e={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId};return this.widgetId&&(e.widgetId=this.widgetId),e.existingPermission&&delete e.confirmAlertTestId,this.request("POST","/channel/blocked-optin-request",e)}},{key:"generateWalletPass",value:function(e,t){var n=this;return new w.a((function(i,r){n.request("POST","/channel/"+n.channelId+"/wallet-pass/"+e+"/subscribe",Object.assign({},{walletPassId:e},t)).then(i).catch(r)}))}}]),e}(),C=n(8),N=n(4);var A,B=function(){function e(t){s()(this,e),this.config=t;try{if("localStorage"in window&&(t.cleverpushDomain&&(t.cleverpushDomain&&localStorage.getItem("cleverpush-subscription-id")&&!localStorage.getItem("cleverpush-domain")&&localStorage.setItem("cleverpush-domain","cleverpush.com"),localStorage.getItem("cleverpush-domain")&&(this.config.cleverpushDomain=localStorage.getItem("cleverpush-domain"))),localStorage.getItem("push-subscription-status")&&!localStorage.getItem("cleverpush-subscription-status")&&localStorage.setItem("cleverpush-subscription-status",localStorage.getItem("push-subscription-status")),localStorage.getItem("push-subscription-id")&&!localStorage.getItem("cleverpush-subscription-id")&&localStorage.setItem("cleverpush-subscription-id",localStorage.getItem("push-subscription-id")),"allowed"!==localStorage.getItem("cleverpush-subscription-status")&&"unsubscribed"!==localStorage.getItem("cleverpush-subscription-status"))){var n=Date.now();void 0===this.config.alertHoursDeny&&(this.config.alertHoursDeny=8760);var i=!1,r=!1;if(localStorage.getItem("cleverpush-deny-time")&&this.config.alertHoursDeny>0){var o=parseInt(localStorage.getItem("cleverpush-deny-time"),10),a=parseInt(this.config.alertHoursDeny,10);isNaN(o)||isNaN(a)||o+60*a*60*1e3<n&&(i=!0)}if(localStorage.getItem("cleverpush-deny-sessions")&&this.config.alertSessionsDeny>0){var c=parseInt(localStorage.getItem("cleverpush-deny-sessions"),10);isNaN(c)||(sessionStorage.getItem("cleverpush-deny-session-counted")||(c+=1,localStorage.setItem("cleverpush-deny-sessions",c)),c>=this.config.alertSessionsDeny&&(r=!0))}!i&&!r||this.config.alertHoursDeny&&!i||this.config.alertSessionsDeny&&!r||(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-deny-time"),localStorage.removeItem("cleverpush-deny-sessions"),"denied"===localStorage.getItem("cleverpush-subscription-status")?localStorage.setItem("cleverpush-subscription-status","was-denied"):localStorage.removeItem("cleverpush-subscription-status"));var u=!1,l=!1;if(localStorage.getItem("cleverpush-close-time")&&this.config.alertHoursClose>0){var f=parseInt(localStorage.getItem("cleverpush-close-time"),10),d=parseInt(this.config.alertHoursClose,10);isNaN(f)||isNaN(d)||f+60*d*60*1e3<n&&(u=!0)}if(localStorage.getItem("cleverpush-close-sessions")&&this.config.alertSessionsClose>0){var h=parseInt(localStorage.getItem("cleverpush-close-sessions"),10);isNaN(h)||(sessionStorage.getItem("cleverpush-close-session-counted")||(h+=1,localStorage.setItem("cleverpush-close-sessions",h)),h>=this.config.alertSessionsClose&&(l=!0))}!u&&!l||this.config.alertHoursClose&&!u||this.config.alertSessionsClose&&!l||(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-subscription-status"),localStorage.removeItem("cleverpush-close-time"),localStorage.removeItem("cleverpush-close-sessions"))}}catch(e){}}return c()(e,[{key:"dbOpenError",value:function(e){var t=this;(this.dbInitializing=!1,e.message&&e.message.toString().indexOf("VersionError")>-1)?(v.a.info("deleting db"),window.indexedDB.deleteDatabase("cleverpush").onsuccess=function(){var e=t.db.open();e.onsuccess=function(){return t.dbOpenSuccess(e)},e.onerror=function(e){v.a.warn(e)}}):e.name&&"NoSuchDatabaseError"===e.name||v.a.warn(e)}},{key:"dbOpenSuccess",value:function(e){var t=this;this.db=e.result,this.dbInitializing=!1,this.db.onerror=function(e){v.a.warn("IndexedDB error occured",e)},this.db.onversionchange=function(e){if(null===e.newVersion)e.target.close();else{t.db.close();var n=window.indexedDB.open("cleverpush",40);n.onsuccess=function(){return t.dbOpenSuccess(n)},n.onerror=t.dbOpenError}}}},{key:"initDb",value:function(e){var t=this;if(this.db||!window.indexedDB||this.dbInitializing)this.db&&"function"==typeof e&&e(this.db);else{this.dbInitializing=!0;try{var n=window.indexedDB.open("cleverpush",40);n.onsuccess=function(){t.dbOpenSuccess(n),"function"==typeof e&&e(n.result)},n.onerror=this.dbOpenError,n.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore("notifications",{keyPath:"id"});n.createIndex("id","id",{unique:!0}),n.createIndex("url","url",{unique:!1}),n.createIndex("clicked","clicked",{unique:!1}),n.createIndex("title","title",{unique:!1}),n.createIndex("text","text",{unique:!1}),n.createIndex("icon","icon",{unique:!1}),n.createIndex("subscriptionId","subscriptionId",{unique:!1}),n.createIndex("channelId","channelId",{unique:!1}),n.createIndex("autoHide","autoHide",{unique:!1}),n.createIndex("markedAsDelivered","markedAsDelivered",{unique:!1}),n.createIndex("markedAsClicked","markedAsClicked",{unique:!1}),n.createIndex("clickedAction","clickedAction",{unique:!1}),n.createIndex("deliveredAt","deliveredAt",{unique:!1});var i=t.createObjectStore("subscription",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("channelId","channelId",{unique:!1})}}catch(e){this.dbInitializing=!1,v.a.info("initDb err",e)}}}},{key:"getNotifications",value:function(e){var t=this;return new Promise((function(n){var i=[];if(t.db){var r=t.db.transaction(["notifications"],"readonly").objectStore("notifications").index("deliveredAt"),o=(IDBKeyRange.lowerBound(0),r.openCursor(null,"prev"));o.onsuccess=function(t){var r=t.target.result;!1==!!r||i.length>=(e||50)?n(i):(i.push(r.value),r.continue())},o.onerror=function(){return n(i)}}else n(i)}))}},{key:"getNotification",value:function(e){var t=this;return new Promise((function(n){if(t.db){var i=t.db.transaction(["notifications"]).objectStore("notifications").get(e);i.onsuccess=function(e){var t=e.target.result;n(t)},i.onerror=function(){return n(null)}}else n(null)}))}},{key:"addNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").put(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"deleteNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").delete(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"canSubscribe",value:function(){try{return new Promise((function(e){try{var t=localStorage.getItem("cleverpush-subscription-status"),n=sessionStorage.getItem("cleverpush-subscription-status");e("denied"!==t&&"unsubscribed"!==t&&"pending"!==t&&"denied"!==n)}catch(t){e(!0)}}))}catch(e){return Promise.resolve(!0)}}},{key:"isSubscribed",value:function(e,t,n){var i=this;try{if(void 0!==t&&t){var r=localStorage.getItem("cleverpush-subscription-status");return!(!r||"denied"===r||"unsubscribed"===r||"pending"===r)&&(!!e||!!this.getSubscriptionId())}return new Promise((function(t){try{var r=localStorage.getItem("cleverpush-subscription-status");if(r&&"denied"!==r&&"unsubscribed"!==r&&"pending"!==r){var o="granted"===localStorage.getItem("amp-web-push-notification-permission");t(!(!e&&!o)||!!i.getSubscriptionId())}else t(!(void 0===n||!n)&&!!i.getSubscriptionId())}catch(e){t(!1)}}))}catch(e){return Promise.resolve(!0)}}},{key:"getSubscriptionId",value:function(){var e;try{(e=localStorage.getItem("cleverpush-subscription-id"))||(e=sessionStorage.getItem("cleverpush-subscription-id"))}catch(e){}if(!e&&Object(C.g)()){var t=new URLSearchParams(location.search.slice(1));t&&(e=t.get("subscriptionId"))}return e}},{key:"setClickedNotification",value:function(e){try{localStorage.setItem("cleverpush-notification-clicked",JSON.stringify({id:e,date:Date.now()}))}catch(e){}}},{key:"getClickedNotification",value:function(){try{var e=localStorage.getItem("cleverpush-notification-clicked"),t=JSON.parse(e);if(t&&t.id&&t.date&&parseInt(t.date,10)+36e5>Date.now())return t.id}catch(e){}return null}},{key:"getLastSession",value:function(){var e;try{e=localStorage.getItem("cleverpush-last-session")}catch(e){}var t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}},{key:"setLastSession",value:function(e){try{localStorage.setItem("cleverpush-last-session",JSON.stringify(e))}catch(e){}}},{key:"setSubscribed",value:function(e,t){var n=this;e&&(localStorage.setItem("cleverpush-subscription-id",e),localStorage.setItem("cleverpush-domain",this.config.cleverpushDomain||"cleverpush.com"),void 0!==t&&t||localStorage.setItem("cleverpush-subscription-status","allowed"),this.initDb((function(t){if(t)try{t.transaction(["subscription"],"readwrite").objectStore("subscription").clear().onsuccess=function(){t.transaction(["subscription"],"readwrite").objectStore("subscription").put({id:e,channelId:n.config.channelId})}}catch(e){v.a.info("setSubscribed db error",e)}})))}},{key:"getFacebookUserRef",value:function(){try{return localStorage.getItem("cleverpush-facebook-user-ref")}catch(e){}}},{key:"setFacebookUserRef",value:function(e){e&&localStorage.setItem("cleverpush-facebook-user-ref",e)}},{key:"setAllowed",value:function(){localStorage.setItem("cleverpush-subscription-status","allowed")}},{key:"setPending",value:function(){localStorage.setItem("cleverpush-subscription-status","pending")}},{key:"setDenied",value:function(){localStorage.setItem("cleverpush-deny-time",Date.now()),localStorage.setItem("cleverpush-subscription-status","denied"),this.config.alertSessionsDeny>0&&(localStorage.setItem("cleverpush-deny-sessions","0"),sessionStorage.setItem("cleverpush-deny-session-counted","true"))}},{key:"setClosed",value:function(){localStorage.setItem("cleverpush-close-time",Date.now()),this.config.alertHoursClose>0||this.config.alertSessionsClose>0?localStorage.setItem("cleverpush-subscription-status","denied"):localStorage.removeItem("cleverpush-subscription-status"),this.config.alertSessionsClose>0&&(localStorage.setItem("cleverpush-close-sessions","0"),sessionStorage.setItem("cleverpush-close-session-counted","true"))}},{key:"setUnsubscribed",value:function(e){if(localStorage.removeItem("push-subscription-id"),localStorage.removeItem("cleverpush-subscription-id"),localStorage.removeItem("cleverpush-last-sync"),localStorage.removeItem("cleverpush-last-session"),localStorage.removeItem("cleverpush-last-worker-update"),localStorage.removeItem("cleverpush-last-worker-version"),localStorage.removeItem("cleverpush-domain"),localStorage.removeItem("cleverpush-facebook-user-ref"),localStorage.removeItem("cleverpush-topics"),localStorage.removeItem("cleverpush-topics-version"),localStorage.removeItem("cleverpush-tags"),localStorage.removeItem("cleverpush-attributes"),localStorage.removeItem("cleverpush-visits"),e||(localStorage.setItem("cleverpush-subscription-status","unsubscribed"),localStorage.setItem("cleverpush-deny-time",Date.now())),Object.keys(localStorage).forEach((function(e){(e&&e.startsWith("cleverpush-tag")||e.startsWith("cleverpush-attribute"))&&localStorage.removeItem(e)})),this.db)try{this.db.transaction(["subscription"],"readwrite").objectStore("subscription").clear()}catch(e){v.a.info("setUnsubscribed db error",e)}}},{key:"checkIfShouldSync",value:function(){var e=this;return new Promise((function(t){try{var n=localStorage.getItem("cleverpush-last-sync");if(e.getSubscriptionId())if(n){var i=parseInt(n,10);isNaN(i)?t(!0):t(i+1728e5<=Date.now())}else t(!0);else t(!0)}catch(e){t(!0)}}))}},{key:"setSynced",value:function(){localStorage.setItem("cleverpush-last-sync",Date.now())}},{key:"checkIfShouldUpdateWorker",value:function(){return new Promise((function(e){try{var t=localStorage.getItem("cleverpush-last-worker-update"),n=localStorage.getItem("cleverpush-last-worker-version");if(t)e("1.0.0"!==n);else e(!0)}catch(t){e(!0)}}))}},{key:"setWorkerUpdated",value:function(){localStorage.setItem("cleverpush-last-worker-update",Date.now()),localStorage.setItem("cleverpush-last-worker-version","1.0.0")}},{key:"getVisits",value:function(){var e;try{e=localStorage.getItem("cleverpush-visits")}catch(e){}var t=0;return e&&(t=parseInt(e,10),isNaN(t)&&(t=0)),t}},{key:"incrementVisits",value:function(){var e=this.getVisits();e+=1,localStorage.setItem("cleverpush-visits",e)}},{key:"setTopics",value:function(e){return v.a.debug("storageManager.setTopics",e),new Promise((function(t){e&&e.length?localStorage.setItem("cleverpush-topics",JSON.stringify(e)):e&&localStorage.removeItem("cleverpush-topics"),t(!0)}))}},{key:"getTopics",value:function(){var e=localStorage.getItem("cleverpush-topics");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"getTagDates",value:function(){var e={};if(localStorage.getItem("cleverpush-tag-dates"))try{e=JSON.parse(localStorage.getItem("cleverpush-tag-dates"))}catch(e){}return e}},{key:"getTagDate",value:function(e){var t=(this.getTagDates()||{})[e];return t?new Date(t):null}},{key:"setTags",value:function(e){var t=this;return new Promise((function(n){localStorage.setItem("cleverpush-tags",JSON.stringify(e));var i=t.getTagDates()||{};e.forEach((function(e){i[e]=(new Date).toISOString()})),localStorage.setItem("cleverpush-tag-dates",JSON.stringify(i)),n(!0)}))}},{key:"addTag",value:function(e){var t=this;return this.getTags().then((function(n){return n.indexOf(e)<0&&n.push(e),t.setTags(n)}))}},{key:"removeTag",value:function(e){var t=this;return this.getTags().then((function(n){var i=n.indexOf(e);return i>-1?(n.splice(i,1),t.setTags(n)):Promise.resolve()}))}},{key:"getTags",value:function(){var e=localStorage.getItem("cleverpush-tags");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"hasTag",value:function(e){return this.getTags().then((function(t){return Promise.resolve(t.indexOf(e)>-1)}))}},{key:"setTempBlocked",value:function(){sessionStorage.setItem("cleverpush-subscription-status","denied")}}]),e}(),M=n(3),x=function(){function e(t,n,i){var r=this;s()(this,e),this.config=t,this.api=n,this.triggerEvent=i,this.storageManager=new B(t),this.subscribed=!1,this.initialTags=[];try{this.getTopics().then((function(e){return r.topics=e}))}catch(e){}}return c()(e,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){return"PREVIEW"===e.config.env?t(!1):"granted"===window.Notification.permission&&navigator.serviceWorker?e.getActiveWorkerRegistration().then((function(n){return n.pushManager.getSubscription().then((function(n){if(n)return e.storageManager.isSubscribed().then((function(n){v.a.debug("manager subscribed = "+n+" (2)"),e.subscribed=n,t(n)}));v.a.debug("manager subscribed = false (1)"),e.subscribed=!1,t(!1)}))})).catch((function(n){n&&v.a.error(n),v.a.debug("manager subscribed = false (3)"),e.subscribed=!1,t(!1)})):(v.a.debug("manager subscribed = false (4)"),e.subscribed=!1,void t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):"denied"===Notification.permission?n(new S.a("User denied notifications","denied")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}))}},{key:"subscribe",value:function(){}},{key:"subscribeForce",value:function(){this.subscribe()}},{key:"showUnsubscribeFeedback",value:function(){var e=this;if(!this.config.unsubscribeFeedbackDisabled){var t=[];this.config.optOutFeedbackAnswers&&this.config.optOutFeedbackAnswers.length?(this.config.optOutFeedbackAnswers.forEach((function(e){return t.push({title:e.title,id:e.id,icon:e.icon})})),this.config.optOutFeedbackCustomText&&t.push({title:Object(M.b)("unsubscribe.reasonOther"),id:"other",icon:""})):t.push({title:Object(M.b)("unsubscribe.reasonQuantity"),id:"quantity",icon:""},{title:Object(M.b)("unsubscribe.reasonContent"),id:"content",icon:""},{title:Object(M.b)("unsubscribe.reasonOther"),id:"other",icon:""});var n=document.createElement("div");n.className="cleverpush-confirm cleverpush-confirm-default cleverpush-uf-box",n.innerHTML='\n    <div class="cleverpush-confirm-text">\n    <span class="cleverpush-confirm-title">'.concat(this.config.optOutFeedbackTitle||Object(M.b)("unsubscribe.feedback"),'</span>\n    </div>\n    <div style="margin-top: 10px; margin-bottom: 5px; padding-top: 10px;">\n    ').concat(t.map((function(e){return'<button type="button" class="cleverpush-confirm-btn cleverpush-uf-button" style="text-transform: none; margin-bottom: 10px !important;" data-reason="'.concat(e.id,'">').concat(e.icon?"<img src=".concat(e.icon,' style="margin-right: 10px; float: left;" width="25" heigh="25">'):"").concat(e.title,"</button>")})).join(""),"\n    </div>\n    "),document.body.appendChild(n);for(var i=n.querySelectorAll(".cleverpush-confirm-btn"),r=0;r<i.length;r++){i[r].addEventListener("click",(function(t){t.preventDefault(),"other"===t.currentTarget.dataset.reason&&e.config.optOutFeedbackCustomText?e.showCustomText(n):(e.api.unsubscribeFeedback(t.currentTarget.dataset.reason),n.parentNode.removeChild(n))}))}}}},{key:"showCustomText",value:function(e){var t=this;e.innerHTML='\n    <div class="cleverpush-confirm-text">\n    <span class="cleverpush-confirm-title">'.concat(Object(M.b)("unsubscribe.enterReason"),'</span>\n    </div>\n    <div style="margin-top: 10px; margin-bottom: 5px;">\n      <div style="text-align: center; padding: 12px;">\n        <textarea style="width: 100%; margin-bottom: 10px;"></textarea>\n        <button type="button" class="cleverpush-confirm-btn cleverpush-uf-button" style="text-transform: none;, margin-bottom: 10px !important;" data-reason="other">').concat(Object(M.b)("unsubscribe.submit"),"</button>\n      </div>\n    </div>\n    "),e.querySelector(".cleverpush-confirm-btn").addEventListener("click",(function(n){n.preventDefault();var i=e.querySelector("textarea").value;t.api.unsubscribeFeedback(n.currentTarget.dataset.reason,i),e.parentNode.removeChild(e)}))}},{key:"unsubscribe",value:function(e,t){var n=this,i=function(){return n.storageManager.setUnsubscribed(e),n.topics=[],n.triggerEvent(N.a.UNSUBSCRIBED),navigator.serviceWorker?n.getActiveWorkerRegistration().then((function(e){return e.pushManager})).then((function(e){return e.getSubscription()})).then((function(e){if(e)return e.unsubscribe().then((function(){return Promise.resolve()}))})):Promise.resolve()},r=this.storageManager.getSubscriptionId();return!r||void 0!==t&&t===r?i().then((function(){return n.showUnsubscribeFeedback(),Promise.resolve()})):this.api.unsubscribe(r).then((function(){return i().then((function(){return n.showUnsubscribeFeedback(),Promise.resolve()}))}))}},{key:"getWorkerPath",value:function(){return!Object(C.f)()||this.config.popupCustomDomainEnabled&&this.config.popupDomain?this.config.serviceWorkerFile||"/worker.js":"/cleverpush-worker.js"}},{key:"getWorkerScope",value:function(){var e=this.getWorkerPath();return e.indexOf("?")>-1&&(e=e.split("?")[0]),e.substr(0,e.lastIndexOf("/")+1)||"/"}},{key:"getServiceWorker",value:function(e){return e.active||e.waiting||e.installing}},{key:"getActiveWorkerRegistration",value:function(){var e=this;return new Promise((function(t,n){if(navigator.serviceWorker)if(navigator.serviceWorker.getRegistration){var i=e.getWorkerScope(),r=e.config.serviceWorkerFile;navigator.serviceWorker.getRegistration(i).then((function(i){i&&e.getServiceWorker(i)&&(!r||!e.getServiceWorker(i).scriptURL||e.getServiceWorker(i).scriptURL.indexOf(r)>-1)?t(i):"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(i){var o=!1;(i||[]).forEach((function(n){o||(n&&e.getServiceWorker(n)&&(!r||!e.getServiceWorker(n).scriptURL||e.getServiceWorker(n).scriptURL.indexOf(r)>-1)?(o=!0,t(n)):v.a.debug("worker: getActiveWorkerRegistration:",n,e.getServiceWorker(n)))})),o||(v.a.debug("worker: getActiveWorkerRegistration: !found"),n())})).catch(n):navigator.serviceWorker.controller?(v.a.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):(v.a.debug("worker: getActiveWorkerRegistration: last reject 1"),n())})).catch(n)}else navigator.serviceWorker.controller?(v.a.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):(v.a.debug("worker: getActiveWorkerRegistration: last reject 2"),n());else v.a.debug("worker: getActiveWorkerRegistration: !navigator.serviceWorker"),n()}))}},{key:"registerWorker",value:function(){var e=this;return new Promise((function(t,n){v.a.debug("registering worker");var i=function(){var i=e.getWorkerPath(),r=e.getWorkerScope();navigator.serviceWorker.register(i,{scope:r,updateViaCache:"none"}).then((function(i){v.a.debug("worker registered",i),i.active?(v.a.debug("worker is active"),t(i)):i.installing?(v.a.debug("worker is installing"),i.installing.addEventListener("statechange",(function(e){v.a.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(i)}))):i.waiting?(v.a.debug("worker is waiting"),i.installing.addEventListener("statechange",(function(e){v.a.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(i)}))):(v.a.debug("worker: getActiveWorkerRegistration"),e.getActiveWorkerRegistration().then(t).catch(n))})).catch((function(e){v.a.error("error registering worker",e),n(e)}))};e.getActiveWorkerRegistration().then((function(e){e&&e.active?(v.a.debug("worker was already registered",e),t(e)):i()})).catch(i)}))}},{key:"unregisterOtherPushSubscriptions",value:function(e){var t=this;Object(v.b)("unregisterOtherPushSubscriptions",e.scriptURL),this.config.importedSubscriptionsProvider&&"function"==typeof navigator.serviceWorker.getRegistrations&&navigator.serviceWorker.getRegistrations().then((function(n){(n||[]).forEach((function(n){t.getServiceWorker(n)&&t.getServiceWorker(n).scriptURL!==e.scriptURL&&t.getServiceWorker(n).scriptURL&&t.getServiceWorker(n).scriptURL.indexOf(t.config.serviceWorkerFile)<0&&t.getServiceWorker(n).scriptURL.indexOf("cleverpush")<0&&n.pushManager.getSubscription().then((function(e){v.a.debug("unsubscribing:",e),e&&(e.unsubscribe(),t.migratedSubscription=!0)}))}))}))}},{key:"tryWorkerUpdate",value:function(e){var t=this;this.tryWorkerUpdateCalled||(this.tryWorkerUpdateCalled=!0,Object(v.b)("tryWorkerUpdate",e),this.storageManager.checkIfShouldUpdateWorker().then((function(n){e&&n&&(v.a.debug("updating worker now"),e.update(),t.storageManager.setWorkerUpdated())})),this.unregisterOtherPushSubscriptionsCalled||(this.unregisterOtherPushSubscriptionsCalled=!0,this.unregisterOtherPushSubscriptions(e)))}},{key:"sync",value:function(e,t){var n=this;Object(v.b)("sync",e);var i=void 0!==t?t:this.topics;return new Promise((function(t){if(n.syncInProgress)return v.a.debug("sync: resolved because syncInProgress was true"),void t();n.syncInProgress=!0;var r=e;n.getSubscriptionId().then((function(e){var o=function(){var o={};e&&(o.subscriptionId=e),n.existingPermission&&(o.existingPermission=!0),n.isReSubscribe&&(o.isReSubscribe=!0),n.migratedSubscription&&(o.migratedSubscription=!0),n.api.syncSubscription(r,i,n.initialTags,o).then((function(e){var i=e.id;if(n.initialTags=[],n.storageManager.setSubscribed(i),n.iframeMessenger&&n.iframeMessenger.setSubscribed(i),n.storageManager.setSynced(),(e.topics||[]).length&&n.storageManager.setTopics(e.topics),e.topics&&n.triggerEvent(N.a.TOPICS_SET),e.topicsVersion)try{localStorage.setItem("cleverpush-topics-version",e.topicsVersion+"")}catch(e){}n.config.channelTags&&n.config.channelTags.length&&!n.existingPermission&&!o.subscriptionId&&n.config.channelTags.forEach((function(e){e.autoAssignOptInPath&&new RegExp(e.autoAssignOptInPath).test(location.pathname)&&CleverPush.tagSubscription(e._id)})),n.syncInProgress=!1,t()})).catch((function(e){void 0!==e?404===e?(n.storageManager.setUnsubscribed(!0),n.iframeMessenger&&n.iframeMessenger.setUnsubscribed(!0),n.subscribe()):v.a.error(e):v.a.error("Unknown Error occured while syncing"),n.syncInProgress=!1,t()}))};void 0!==r&&r?o():(r=e)?o():(n.syncInProgress=!1,t())})).catch((function(e){n.syncInProgress=!1}))}))}},{key:"getSubscriptionId",value:function(){var e=this.storageManager.getSubscriptionId();return e?v.a.debug("subscriptionId",e):v.a.debug("subscriptionId not found"),Promise.resolve(e)}},{key:"hasNotificationPermission",value:function(){return"PREVIEW"===this.config.env?Promise.resolve(!1):Promise.resolve("granted"===window.Notification.permission)}},{key:"getNotificationPermission",value:function(e){try{if("Firefox"===C.a.name&&"denied"===sessionStorage.getItem("cleverpush-subscription-status")&&void 0===e)return"denied"}catch(e){}return window.Notification.permission}},{key:"setConfirm",value:function(e){this.confirm=e}},{key:"setTopics",value:function(e){return v.a.debug("setTopics",e),this.topics=e,this.storageManager.setTopics(e)}},{key:"getTopics",value:function(){return this.storageManager.getTopics()}},{key:"getStoredNotifications",value:function(){var e=this,t="/channel/"+this.api.channelId+"/received-notifications";return this.getTopics().then((function(n){return n&&n.length&&(t+="?"+n.map((function(e){return"topics[]="+e})).join("&")),e.api.request("GET",t).then((function(e){return new Promise((function(t){e&&e.notifications?t(e.notifications.filter((function(e){return e.createdAt})).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})).map((function(e){return Object.assign({},e,{title:e.title||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].title:""),text:e.text||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].text:""),mediaUrl:e.mediaUrl||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].mediaUrl:""),url:e.url||(e.testVariants&&e.testVariants.length&&e.testVariants[0]?e.testVariants[0].url:"")})}))):t([])}))}))}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n,i){t.storageManager.db?t.storageManager.deleteNotification(e).then((function(){n()})).catch((function(e){i(e)})):n()}))}},{key:"getPushManagerSubscribeOptions",value:function(){var e={userVisibleOnly:!0};if(this.config.vapidPublicKey&&this.config.vapidPublicKey.length){var t=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}(this.config.vapidPublicKey);t&&(e.applicationServerKey=t)}return e}},{key:"setClickedNotification",value:function(e){return this.storageManager.setClickedNotification(e),Promise.resolve()}},{key:"getClickedNotification",value:function(){var e=this;return new Promise((function(t){t(e.storageManager.getClickedNotification())}))}}]),e}(),D=function(e){function t(){return s()(this,t),l()(this,d()(t).apply(this,arguments))}return p()(t,e),t}(S.a),L=function(e){function t(e,n,i){var r;return s()(this,t),(r=l()(this,d()(t).call(this,e,n,i))).triggerEvent(N.a.INITIALIZED),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(e){var t=this;if(void 0!==e&&e){if(!this.config.safariWebsitePushId)return!1;var n=window.safari.pushNotification.permission(this.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;return!("granted"!==i||!r)&&this.storageManager.isSubscribed(!1,!0)}return new Promise((function(e){if(t.config.safariWebsitePushId){var n=window.safari.pushNotification.permission(t.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;if("granted"===i&&r)return t.storageManager.isSubscribed().then((function(n){n?t.storageManager.checkIfShouldSync().then((function(n){n?t.sync().then((function(){e(!0)})).catch((function(t){v.a.warn("error while syncing",t),e(!0)})):e(!0)})):e(!1)}));e(!1)}else e(!1)}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.config.safariWebsitePushId&&e.config.safariWebsitePushId.length)if(e.config.domain||e.config.channelDomain){try{window.safari.pushNotification.requestPermission("https://",e.config.safariWebsitePushId,{},null)}catch(e){"string"==typeof e&&e.indexOf("user gesture")>-1||"string"==typeof e.message&&e.message.indexOf("user gesture")>-1||n(e)}e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(i){i?n(new S.a("User is already subscribed","subscribed")):"denied"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission?n(new S.a("User denied notifications","denied")):(e.config.isSafari_12_1&&e.api.getSyncParameters().then((function(t){e.cachedSyncParameters=t})),t(!0))})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}else t(!1),v.a.warn("Channel domain is not set but required for safari.");else t(!1),v.a.warn("Safari web push ID not set.")}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribed(!0))e.confirm&&e.confirm.hideBackdrop(),t();else if(e.isSubscribing)n(new D("A subscription process is already in progress."));else if(e.config.safariWebsitePushId){var i;e.isSubscribing=!0;!function r(o){var s=o.permission,a=o.deviceToken;if(i&&"default"!==s&&clearInterval(i),"default"===s){if(v.a.info("calling window.safari.pushNotification.requestPermission"),e.config.isSafari_12_1){e.cachedSyncParameters||(e.cachedSyncParameters=e.api.getSyncParameters(!0)),Object.keys(e.cachedSyncParameters||{}).forEach((function(t){null===e.cachedSyncParameters[t]&&delete e.cachedSyncParameters[t]}));try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,e.cachedSyncParameters,r.bind(e))}catch(t){v.a.error("Safari error:",t),e.isSubscribing=!0,n(t)}}else e.api.getSyncParameters().then((function(t){try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,t,r.bind(e))}catch(t){v.a.error("Safari error:",t),e.isSubscribing=!0,n(t)}}));i=setInterval((function(){var t=window.safari.pushNotification.permission(e.config.safariWebsitePushId);"default"!==t.permission&&r(t)}),100),setTimeout((function(){"default"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission&&(i&&clearInterval(i),e.confirm&&e.confirm.hideBackdrop(),e.storageManager.setClosed())}),3e4)}else"denied"===s?(e.confirm&&e.confirm.hideBackdrop(),e.isSubscribing=!0,n(new S.a(Object(M.b)("popup.info").formatCleverPush("<strong>"+(Object(M.b)("confirm.allowBrowser")||Object(M.b)("confirm.allow"))+"</strong>"),"denied"))):"granted"===s&&(e.confirm&&(e.confirm.hideBackdrop(),e.config.confirmAlertSelectTopicsLater&&e.confirm.appendConfirmBox(e.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)),e.sync({deviceToken:a}).then((function(){e.isSubscribing=!1,e.triggerEvent(N.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t(s)})))}(window.safari.pushNotification.permission(e.config.safariWebsitePushId))}else v.a.warn("Safari Website Push ID missing"),n(new S.a("Safari Website Push ID missing","internal"))}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(N.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve("granted"===window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission)}},{key:"getNotificationPermission",value:function(){return window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission}}]),t}(x),R=n(14),j=n.n(R),U="message",W={"http:":"80","https:":"443"},F=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/,q={ERR_CONNECTION_DESTROYED:"ConnectionDestroyed",ERR_CONNECTION_TIMEOUT:"ConnectionTimeout",ERR_NOT_IN_IFRAME:"NotInIframe",ERR_IFRAME_ALREADY_ATTACHED_TO_DOM:"IframeAlreadyAttachedToDom",Promise:function(){try{return window?window.Promise:null}catch(e){return null}}(),debug:!1},z=(A=0,function(){return++A}),V=function(){if(q.debug){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,["[Penpal]"].concat(n))}},H=function(e){var t=[];return e((function(){t.forEach((function(e){e()}))})),{then:function(e){t.push(e)}}},K=function(e){return{name:e.name,message:e.message,stack:e.stack}},G=function(e){var t=new Error;return Object.keys(e).forEach((function(n){return t[n]=e[n]})),t},J=function(e,t,n,i,r){var o=t.localName,s=t.local,a=t.remote,c=t.remoteOrigin,u=!1;V("".concat(o,": Connecting call sender"));r.then((function(){u=!0})),n.reduce((function(e,t){return e[t]=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(V("".concat(o,": Sending ").concat(e,"() call")),a.closed&&i(),u){var l=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw l.code="ConnectionDestroyed",l}return new q.Promise((function(t,i){var r=z();s.addEventListener(U,(function n(u){if(u.source===a&&u.origin===c&&"reply"===u.data.penpal&&u.data.id===r){V("".concat(o,": Received ").concat(e,"() reply")),s.removeEventListener(U,n);var l=u.data.returnValue;u.data.returnValueIsError&&(l=G(l)),("fulfilled"===u.data.resolution?t:i)(l)}})),a.postMessage({penpal:"call",id:r,methodName:e,args:n},c)}))}}(t),e}),e)},Z=function(e,t,n){var i=e.localName,r=e.local,o=e.remote,s=e.remoteOrigin,a=!1;V("".concat(i,": Connecting call receiver"));var c=function(e){if(e.source===o&&e.origin===s&&"call"===e.data.penpal){var n=e.data,r=n.methodName,c=n.args,u=n.id;if(V("".concat(i,": Received ").concat(r,"() call")),r in t){var l=function(e){return function(t){if(V("".concat(i,": Sending ").concat(r,"() reply")),a)V("".concat(i,": Unable to send ").concat(r,"() reply due to destroyed connection"));else{var n={penpal:"reply",id:u,resolution:e,returnValue:t};"rejected"===e&&t instanceof Error&&(n.returnValue=K(t),n.returnValueIsError=!0);try{o.postMessage(n,s)}catch(e){throw"DataCloneError"===e.name&&o.postMessage({penpal:"reply",id:u,resolution:"rejected",returnValue:K(e),returnValueIsError:!0},s),e}}}};new q.Promise((function(e){return e(t[r].apply(t,c))})).then(l("fulfilled"),l("rejected"))}}};r.addEventListener(U,c),n.then((function(){a=!0,r.removeEventListener(U,c)}))};q.connectToChild=function(e){var t,n=e.url,i=e.appendTo,r=e.iframe,o=e.methods,s=void 0===o?{}:o,a=e.timeout,c=e.childWindow;if(r&&r.parentNode){var u=new Error("connectToChild() must not be called with an iframe already attached to DOM");throw u.code="IframeAlreadyAttachedToDom",u}var l=new H((function(e){t=e})),f=window;c||((r=r||document.createElement("iframe")).src=n);var d=function(e){var t,n,i,r=document.location,o=F.exec(e);if(o?(t=o[1]?o[1]:r.protocol,n=o[2],i=o[4]):(t=r.protocol,n=r.hostname,i=r.port),"file:"===t)return"null";var s=i&&i!==W[t]?":".concat(i):"";return"".concat(t,"//").concat(n).concat(s)}(n);return{promise:new q.Promise((function(e,n){var o;void 0!==a&&(o=setTimeout((function(){var e=new Error("Connection to child timed out after ".concat(a,"ms"));e.code="ConnectionTimeout",n(e),t()}),a));var u,h,p={},b=function(n){var i=c||r.contentWindow;if(n.source===i&&n.origin===d&&"handshake"===n.data.penpal){V("Parent: Received handshake, sending reply");var a="null"===n.origin?"*":n.origin;n.source.postMessage({penpal:"handshake-reply",methodNames:Object.keys(s)},a);var b={localName:"Parent",local:f,remote:i,remoteOrigin:a};h&&h();var g=new H((function(e){l.then(e),h=e}));Z(b,s,g),u&&u.forEach((function(e){delete p[e]})),u=n.data.methodNames,J(p,b,u,t,l),clearTimeout(o),e(p)}};if(f.addEventListener(U,b),!c){V("Parent: Loading iframe"),(i||document.body).appendChild(r);var g=setInterval((function(){document.body.contains(r)||(clearInterval(g),t())}),6e4);l.then((function(){r.parentNode&&r.parentNode.removeChild(r),f.removeEventListener(U,b),clearInterval(g);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)}))}})),iframe:r,destroy:t}},q.connectToParent=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parentOrigin,i=void 0===n?"*":n,r=t.methods,o=void 0===r?{}:r,s=t.timeout,a=t.parentWindow;if(window===window.top&&!window.opener){var c=new Error("connectToParent() must be called within an iframe");throw c.code="NotInIframe",c}var u=new H((function(t){e=t})),l=window,f=a||l.parent,d=new q.Promise((function(t,n){var r;void 0!==s&&(r=setTimeout((function(){var t=new Error("Connection to parent timed out after ".concat(s,"ms"));t.code="ConnectionTimeout",n(t),e()}),s));var a=function n(s){if(("*"===i||i===s.origin)&&s.source===f&&"handshake-reply"===s.data.penpal){V("Child: Received handshake reply"),l.removeEventListener(U,n);var a={localName:"Child",local:l,remote:f,remoteOrigin:s.origin},c={};Z(a,o,u),J(c,a,s.data.methodNames,e,u),clearTimeout(r),t(c)}};l.addEventListener(U,a),u.then((function(){l.removeEventListener(U,a);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)})),V("Child: Sending handshake"),f.postMessage({penpal:"handshake",methodNames:Object.keys(o)},i)}));return{promise:d,destroy:e}};var Y=q;var Q=function(e){function t(e,n,i){var r;if(s()(this,t),(r=l()(this,d()(t).call(this,e,n,i))).isSubscribed().then((function(e){e&&r.storageManager.initDb()})),e.loadIframe&&r.config.subdomain){var o="https://".concat(r.config.subdomain,".").concat(r.config.cleverpushDomain||"cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),Y.debug=v.a.getLevel()<2;var c=Y.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,timeout:2e4});c.iframe.style.display="none",c.promise.then((function(e){v.a.debug("child ready",e),r.iframeMessenger=e,e.setConfig(r.config).then((function(){r.triggerEvent(N.a.INITIALIZED)}))})).catch((function(e){v.a.debug("iFrame connection error",e),r.triggerEvent(N.a.INITIALIZED)}))}else r.triggerEvent(N.a.INITIALIZED);return!navigator.permissions||"Firefox"===C.a.name&&C.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("granted"!==window.Notification.permission&&r.triggerEvent(N.a.UNSUBSCRIBED),"denied"===window.Notification.permission?r.unsubscribe():r.isSubscribed().then((function(e){e||r.triggerEvent(N.a.PERMISSION_RE_GRANTED)})))}})),r}return p()(t,e),c()(t,[{key:"unsubscribe",value:function(e){var n=this;return this.iframeMessenger?this.iframeMessenger.getSubscriptionId().then((function(i){return n.iframeMessenger.unsubscribe(!0).then((function(){return j()(d()(t.prototype),"unsubscribe",n).call(n,e,i)}))})):j()(d()(t.prototype),"unsubscribe",this).call(this,e)}},{key:"isSubscribedViaSubdomain",value:function(){return!0}},{key:"replaceRootWorker",value:function(){var e=this;return new Promise((function(t){"granted"===window.Notification.permission&&navigator.serviceWorker&&"/"===e.getWorkerScope()&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.scriptURL&&navigator.serviceWorker.controller.scriptURL.indexOf(e.getWorkerPath())<0?(v.a.debug("replacing root service worker..."),navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(e){v.a.debug("replacing root worker result",e),t()})).catch(t)})).catch((function(e){v.a.debug("replacing root service worker failed",e),t()}))):t()}))}},{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);var n=function(){v.a.debug("httpsManager syncAndResolve"),e.storageManager.checkIfShouldSync().then((function(n){n?e.sync().then((function(){v.a.debug("httpsManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){v.a.warn("error while syncing",n),v.a.debug("httpsManager subscribed = true (2)"),e.subscribed=!0,t(!0)})):(v.a.debug("httpsManager subscribed = true (3)"),e.subscribed=!0,t(!0))}))},i=function(){v.a.debug("httpsManager resubscribe"),e.isSubscribing?(v.a.debug("httpsManager subscribed = true (6)"),e.subscribed=!0,t(!0)):(e.isSubscribing=!0,e.isReSubscribe=!0,e.storageManager.canSubscribe().then((function(n){n?e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(N.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),v.a.debug("httpsManager subscribed = true (4)"),e.subscribed=!0,t(!0)}))})).catch((function(n){v.a.error(n),e.isSubscribing=!1,v.a.debug("httpsManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(e.isSubscribing=!1,t(!1))})))},r=function(){if("granted"===window.Notification.permission&&navigator.serviceWorker)return e.getActiveWorkerRegistration().then((function(r){return r.pushManager.getSubscription().then((function(o){return e.tryWorkerUpdate(r),o?e.storageManager.isSubscribed().then((function(i){i?n():(v.a.debug("httpsManager subscribed = false (7)"),e.subscribed=!1,t(!1))})):e.config.showConfirmAlertResubscribe?(e.config.showConfirmAlert=!0,void t(!1)):(v.a.debug("isSubscribed: no subscription found -> resubscribe"),void i())}))})).catch((function(n){if(e.config.showConfirmAlertResubscribe)return e.config.showConfirmAlert=!0,void t(!1);v.a.debug("isSubscribed: -> resubscribe ",n),i()}));v.a.debug("isSubscribed: no perm or SW found"),v.a.debug("httpsManager subscribed = false (8)"),e.subscribed=!1,t(!1)};e.replaceRootWorker().then((function(){if(!e.iframeMessenger)return r();e.iframeMessenger.isSubscribed().then((function(t){return v.a.debug("isSubscribed",t),t?e.iframeMessenger.getSubscriptionId().then((function(t){return t===e.storageManager.getSubscriptionId()?r():n()})):r()})).catch((function(n){n&&(v.a.debug("isSubscribed err",n),v.a.error(n)),v.a.debug("httpsManager subscribed = false (9)"),e.subscribed=!1,t(!1)}))}))}))}},{key:"pushManagerSubscribe",value:function(e,t){var n=this;return new Promise((function(i,r){e.pushManager.subscribe(n.getPushManagerSubscribeOptions()).then((function(t){i(t),n.unregisterOtherPushSubscriptions(e)})).catch((function(o){!t&&o&&o.message&&(o.message.indexOf("subscription with a different application server key")>-1||o.message.indexOf("subscription with a different applicationServerKey")>-1)?e.pushManager.getSubscription().then((function(t){t?(n.migratedSubscription=!0,t.unsubscribe().then((function(){n.pushManagerSubscribe(e,!0).then(i).catch(r)})).catch(r)):r(o)})).catch(r):r(o)}))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if("denied"===window.Notification.permission&&e.config.alertHoursDeny&&"was-denied"===localStorage.getItem("cleverpush-subscription-status")&&"denied"!==sessionStorage.getItem("cleverpush-subscription-status"))return e.config.showUnblockTutorial=!0,e.config.showConfirmAlert=!0,void t(!0);if("PREVIEW"===e.config.env)return t(!0);var i=function(){"denied"===window.Notification.permission?n(new S.a("User has manually denied notifications","unsubscribed")):e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))},r=function(){if("accengage"!==e.config.importedSubscriptionsProvider||!e.config.importedSubscriptionsSubdomain)return i();var n;(n=e.config,new Promise((function(e){window.addEventListener("message",(function t(n){if(console.log("acc message",n.data),n.data&&"mid:get:storage"===n.data.type)if(window.removeEventListener("message",t),n.data.body){var i=JSON.parse(n.data.body);e(!!i&&!0===i.isOptin)}else e(!1)}));var t=document.querySelector('iframe[name="acc_proxy"]');t?t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*"):((t=document.createElement("iframe")).src="https://"+n.importedSubscriptionsSubdomain+".accengage.net/pushweb/assets/m_main.html",t.style.display="none",t.style.border="none",t.name="acc_proxy",t.onload=function(){t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*")},t.onerror=function(){return e(!1)},document.body.appendChild(t))}))).then((function(e){if(!e)return i();t(!1)}))};if(!e.iframeMessenger)return r();e.iframeMessenger.canSubscribe().then((function(e){var t=e.result,i=e.message,o=e.reason;if(v.a.debug("canSubscribe from iframe",t),!0===t)return r();n(new S.a(i,o))}),(function(e){e&&v.a.debug("canSubscribe err iframe",e),n(e)}))}))}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){var n=e.storageManager.getSubscriptionId();n?t(n):e.iframeMessenger?e.iframeMessenger.getSubscriptionId().then((function(e){t(e)})):t(null)}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);"granted"===window.Notification.permission?t(!0):t(!1)}))}},{key:"registerForPush",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.setAllowed(),!(e.topics||[]).length&&e.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==e.config.confirmAlertNativeTheme&&e.confirm&&e.confirm.hasTopicCheckboxes()&&e.setTopics(e.confirm.getSelectedTopics()),e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return v.a.debug("push manager subscription",n),e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(N.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t("granted")}))})).catch((function(t){v.a.error(t),e.isSubscribing=!1,n(t)}))}))}},{key:"subscribeForce",value:function(e){var t=this;return new Promise((function(i,r){e?i():t.isSubscribing?r(new D("A subscription process is already in progress.")):(t.isSubscribing=!0,"default"===Notification.permission?Notification.requestPermission((function(e){if("granted"===e){if(t.registerForPushLater=!1,t.registerForPushLater?t.storageManager.setPending():t.registerForPush().then(i).catch(r),t.confirm&&(t.confirm.hideBackdrop(e),t.config.confirmAlertSelectTopicsLater&&(t.confirm.channelTopics||[]).length&&!t.config.confirmAlertHideChannelTopics&&(t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),t.config.confirmAlertSubscribeLater&&(t.registerForPushLater=!0)),t.config.confirmAlertSelectAttributesLater)){var o=n(!function(){var e=new Error("Cannot find module '../selectAttributes'");throw e.code="MODULE_NOT_FOUND",e}()).default;t.selectAttributes=new o(t.config,t),t.selectAttributes.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}}else t.isSubscribing=!1,"default"===e&&(t.storageManager.setClosed(),"Firefox"===C.a.name&&t.storageManager.setTempBlocked()),"denied"===e&&(t.api.confirmAlertDenied(),t.storageManager.setDenied()),r(new S.a(Object(M.b)("popup.info").formatCleverPush("<strong>"+(Object(M.b)("confirm.allowBrowser")||Object(M.b)("confirm.allow"))+"</strong>"),e));v.a.debug("HTTP Permission Request Result:",e)})):"denied"===Notification.permission?(t.isSubscribing=!1,r(new S.a(Object(M.b)("popup.info").formatCleverPush("<strong>"+(Object(M.b)("confirm.allowBrowser")||Object(M.b)("confirm.allow"))+"</strong>"),"denied"))):(v.a.debug("PermissionAlreadyGranted",t.config.confirmAlertSelectTopicsLater&&(t.confirm.channelTopics||[]).length&&!t.config.confirmAlertHideChannelTopics),t.registerForPush().then(i).catch(r),t.confirm&&(t.confirm.hideBackdrop("granted"),t.config.confirmAlertSelectTopicsLater&&(t.confirm.channelTopics||[]).length&&!t.config.confirmAlertHideChannelTopics&&t.getTopics().then((function(e){(e||[]).length||t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)})))))}))}},{key:"subscribe",value:function(){var e=this;return this.isSubscribed().then((function(t){return e.subscribeForce(t)}))}},{key:"setClickedNotification",value:function(e){this.storageManager.setClickedNotification(e),this.iframeMessenger&&this.iframeMessenger.setClickedNotification(e)}},{key:"getClickedNotification",value:function(){var e=this;return new Promise((function(t){var n=e.storageManager.getClickedNotification();!n&&e.iframeMessenger?e.iframeMessenger.getClickedNotification().then((function(e){t(e)})):t(n)}))}}]),t}(x),X=n(6),$=n.n(X);var ee=function(e){function t(e,n,i){var r;if(s()(this,t),(r=l()(this,d()(t).call(this,e,n,i))).isSubscribing=!1,r.iframeMessenger=null,r.popupMessenger=null,r.setTopics=r.setTopics.bind($()(r)),r.config.subdomain&&r.config.subdomain.length&&!1!==r.config.loadIframe){var o="https://".concat(r.config.subdomain.toLowerCase(),".").concat(r.config.cleverpushDomain||"cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),Y.debug=v.a.getLevel()<2;var c=Y.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,methods:{onSubscribed:function(e){r.triggerEvent(N.a.SUBSCRIBED,e)}}});c.iframe.style.display="none",c.promise.then((function(e){v.a.debug("child ready",e),r.iframeMessenger=e,e.setConfig(r.config).then((function(){r.triggerEvent(N.a.INITIALIZED)})),r.getTopics().then((function(e){return r.topics=e}))})).catch((function(){v.a.debug("iframe connection failed"),r.triggerEvent(N.a.INITIALIZED)}))}else v.a.debug("iframe subdomain not available"),r.triggerEvent(N.a.INITIALIZED);return!navigator.permissions||"Firefox"===C.a.name&&C.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("denied"===window.Notification.permission?r.unsubscribe():"granted"===window.Notification.permission&&r.isSubscribed().then((function(e){e||r.triggerEvent(N.a.PERMISSION_RE_GRANTED)})))}})),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.isSubscribed().then((function(n){v.a.debug("isSubscribed from iframe",n),n?(v.a.debug("hostManager subscribed = true (3)"),e.subscribed=!0,t(!0)):e.storageManager.isSubscribed(!1).then((function(n){n?e.storageManager.checkIfShouldSync().then((function(n){n&&e.sync().then((function(){v.a.debug("hostManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){v.a.warn("error while syncing",n),v.a.debug("hostManager subscribed = true (2)"),e.subscribed=!0,t(!0)}))})):(v.a.debug("hostManager subscribed = false (4)"),e.subscribed=!1,t(!1))}))})).catch((function(n){n&&(v.a.debug("isSubscribed err",n),v.a.error(n)),v.a.debug("hostManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(v.a.debug("hostManager subscribed = false (6)"),e.subscribed=!1,t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.iframeMessenger?e.iframeMessenger.canSubscribe().then((function(i){var r=i.result,o=i.message,s=i.reason;v.a.debug("canSubscribe from iframe",r),!0===r?e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))})):n(new S.a(o,s))}),(function(e){v.a.debug("canSubscribe err iframe",e),n(e)})):e.storageManager.canSubscribe().then((function(i){v.a.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e,t,i=this,r=this.config.popupCustomDomainEnabled&&this.config.popupDomain;if(!this.isSubscribing){var o="".concat(this.config.subdomain||this.config.channelSubdomain,".").concat(this.config.cleverpushDomain||"cleverpush.com"),s="/subscribe";r&&(o=this.config.popupDomain,s=this.config.popupSubscribePath||"/"),t="https://".concat(o).concat(s,"?origin=").concat(location.origin),this.config.confirmAlertTestId&&(t+="&confirmAlertTestId=".concat(this.config.confirmAlertTestId)),e=function(e,t,n,i,r){Object(v.b)("popup",e,t,n);var o=void 0!==window.screenLeft?window.screenLeft:screen.left,s=void 0!==window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=void 0===i||isNaN(i)?a/2-t/2+o:i,l=void 0===r||isNaN(r)?c/2-n/2+s:r,f=window.open(e,"_blank","width=".concat(t,", height=").concat(n,", top=").concat(l,", left=").concat(u).concat("scrollbars=yes"));return f&&f.focus&&f.focus(),f}(t,this.config.popupWidth||800,this.config.popupHeight||600,this.config.popupTop||void 0,this.config.popupLeft||void 0)}e&&r&&(Y.debug=v.a.getLevel()<2,Y.connectToChild({childWindow:e,url:t,timeout:3e4,methods:{setSubscribed:function(e){return e&&(i.storageManager.setSubscribed(e),i.iframeMessenger&&i.iframeMessenger.setSubscribed(e),i.triggerEvent(N.a.SUBSCRIBED,e)),Promise.resolve()}}}).promise.then((function(e){v.a.debug("popup connection ready",e),e.setConfig(i.config).then((function(){}))})).catch((function(e){v.a.error("popup connection error",e)})));return new Promise((function(t,r){if(i.isSubscribing)v.a.error("A subscription process is already in progress."),r(new D);else{i.isSubscribing=!0;var o=function(){i.isSubscribing=!1,i.getSubscriptionId().then((function(e){if(e){if(i.storageManager.setSubscribed(e),i.iframeMessenger&&i.iframeMessenger.setSubscribed(e),i.triggerEvent(N.a.SUBSCRIBED,e),i.config.confirmAlertSelectTopicsLater&&!i.config.confirmAlertHideChannelTopics&&i.confirm.appendConfirmBox(i.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),i.config.confirmAlertSelectAttributesLater){var r=n(!function(){var e=new Error("Cannot find module '../selectAttributes'");throw e.code="MODULE_NOT_FOUND",e}()).default;i.selectAttributes=new r(i.config,i),i.selectAttributes.appendConfirmBox(i.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}t("granted")}else i.storageManager.setClosed(),t("default")}))};e?function(e,t){if(e){var n,i=function(){n&&(clearInterval(n),n=null),t()};n=setInterval((function(){try{e&&!e.closed||i()}catch(e){i()}}),100)}}(e,o):(v.a.error("Popup blocked - Somehow we tried to open a popup without a click event."),o())}}))}},{key:"unsubscribe",value:function(e){var t=this;if(this.iframeMessenger)return this.iframeMessenger.unsubscribe(e).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(N.a.UNSUBSCRIBED)}));this.storageManager.setUnsubscribed(e),this.triggerEvent(N.a.UNSUBSCRIBED)}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger.getSubscriptionId().then((function(e){t(e)}))}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);e.iframeMessenger?e.iframeMessenger.hasNotificationPermission().then((function(e){t(e)})):t(!1)}))}},{key:"getNotificationPermission",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getNotificationPermission().then((function(e){t(e)})):t()}))}},{key:"setTopics",value:function(e){return this.topics=e,this.iframeMessenger?this.iframeMessenger.setTopics(e):Promise.resolve()}},{key:"getTopics",value:function(){return this.iframeMessenger?this.iframeMessenger.getTopics():Promise.resolve([])}},{key:"getStoredNotifications",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getStoredNotifications().then((function(e){t(e)})):t([])}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n){t.iframeMessenger?t.iframeMessenger.deleteStoredNotification(e).then(n):n()}))}}]),t}(x),te=n(18),ne=n.n(te),ie=function(e){function t(e,n,i){var r,o;if(s()(this,t),(r=l()(this,d()(t).call(this,e,n,i))).isSubscribed().then((function(e){e&&r.storageManager.initDb()})),r.config=e,r.api=n,r.isSubscribing=!1,(window.opener||window.parent)===window)return document.write('<p style="font-size: 14px; color: red; font-family: sans-serif;">CleverPush: This page cannot be directly opened, and\nmust be opened as a result of a subscription call.</p>'),l()(r);if("undefined"!=typeof URLSearchParams&&location.search){var a=new URLSearchParams(location.search.slice(1));a.get("origin")&&(o=a.get("origin"))}return v.a.debug("PenPal parentOrigin",o),Y.debug=v.a.getLevel()<2,Y.connectToParent({parentOrigin:o,methods:{subscribe:r.subscribe.bind($()(r)),setSubscribed:r.setSubscribed.bind($()(r)),setDenied:r.setDenied.bind($()(r)),setClosed:r.setClosed.bind($()(r)),setUnsubscribed:r.setUnsubscribed.bind($()(r)),unsubscribe:r.unsubscribe.bind($()(r)),isSubscribed:r.isSubscribed.bind($()(r)),canSubscribe:r.canSubscribe.bind($()(r)),setTopics:j()(d()(t.prototype),"setTopics",$()(r)).bind($()(r)),getTopics:j()(d()(t.prototype),"getTopics",$()(r)).bind($()(r)),getSubscriptionId:j()(d()(t.prototype),"getSubscriptionId",$()(r)).bind($()(r)),hasNotificationPermission:j()(d()(t.prototype),"hasNotificationPermission",$()(r)).bind($()(r)),getNotificationPermission:j()(d()(t.prototype),"getNotificationPermission",$()(r)).bind($()(r)),setClickedNotification:j()(d()(t.prototype),"setClickedNotification",$()(r)).bind($()(r)),getClickedNotification:j()(d()(t.prototype),"getClickedNotification",$()(r)).bind($()(r)),getStoredNotifications:j()(d()(t.prototype),"getStoredNotifications",$()(r)).bind($()(r)),deleteStoredNotification:j()(d()(t.prototype),"deleteStoredNotification",$()(r)).bind($()(r)),setConfig:function(e){return ne()(d()(t.prototype),"config",e,$()(r),!0),r.config=e,r.config.confirmAlertTestId&&r.api.setConfirmAlertTestId(r.config.confirmAlertTestId),Promise.resolve()},getStorage:function(){try{Promise.resolve({"cleverpush-subscription-id":localStorage.get("cleverpush-subscription-id"),"cleverpush-subscription-status":localStorage.get("cleverpush-subscription-status")})}catch(e){Promise.resolve({"cleverpush-subscription-id":void 0,"cleverpush-subscription-status":void 0})}}}}),!navigator.permissions||"Firefox"===C.a.name&&C.b<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){r.isSubscribing||("granted"!==window.Notification.permission?r.unsubscribe():r.isSubscribed((function(e){e||r.subscribe()})))}})),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.isSubscribed(!1,!1,!0).then((function(e){v.a.debug("Status: storage status:",e),t(e)}))}catch(e){t(!1)}}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.canSubscribe().then((function(n){n?e.isSubscribed().then((function(e){t(e?{result:!1,message:"User is already subscribed",reason:"subscribed"}:{result:!0})})):t({result:!1,message:"User has manually unsubscribed or denied notifications",reason:"unsubscribed"})}))}catch(e){t({result:!0})}}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribing)v.a.error("A subscription process is already in progress."),n(new D);else{e.isSubscribing=!0;var i=function(){e.storageManager.isSubscribed().then((function(e){t({permission:"granted",serviceWorkerInstalled:e})}))};"default"===Notification.permission?Notification.requestPermission((function(n){e.isSubscribing=!1,"granted"===n?i():t({permission:n}),v.a.debug("HTTP Permission Request Result:",n)})):"denied"===Notification.permission?(e.isSubscribing=!1,t({permission:"denied"})):(e.isSubscribing=!1,v.a.debug("PermissionAlreadyGranted"),i())}}))}},{key:"setSubscribed",value:function(e){try{this.storageManager.setSubscribed(e,!0)}catch(e){}}},{key:"setDenied",value:function(){try{this.storageManager.setDenied()}catch(e){}}},{key:"setClosed",value:function(){try{this.storageManager.setClosed()}catch(e){}}},{key:"setUnsubscribed",value:function(e){try{this.storageManager.setUnsubscribed(e)}catch(e){}}},{key:"unsubscribe",value:function(e){var t=this;return new Promise((function(n){var i;try{i=t.storageManager.getSubscriptionId()}catch(e){}return i?t.api.unsubscribe(i).then((function(){try{t.storageManager.setUnsubscribed(e)}catch(e){}return n()})).catch((function(){return n()})):n()}))}}]),t}(x),re=n(16),oe=function(e){function t(e,n,i){var r;s()(this,t),(r=l()(this,d()(t).call(this,e,n,i))).config=e,r.isSubscribing=!1;var o=localStorage.getItem("cleverpush-topics");if(o)try{r.topics=JSON.parse(o)}catch(e){}if(r.config.loadConfigFromParent){var a;if("undefined"!=typeof URLSearchParams&&location.search){var c=new URLSearchParams(location.search.slice(1));c.get("origin")&&(a=c.get("origin"))}v.a.debug("PenPal parentOrigin",a),Y.debug=v.a.getLevel()<2,Y.connectToParent({parentOrigin:a,parentWindow:window.opener,methods:{setConfig:function(e){return e.env="POPUP",ne()(d()(t.prototype),"config",e,$()(r),!0),r.config=e,r.config.confirmAlertTestId&&r.api.setConfirmAlertTestId(r.config.confirmAlertTestId),r.api.channelId=r.config.channelId,r.initPopup(),Promise.resolve()}}}).promise.then((function(e){r.parentMessenger=e}))}else r.initPopup();return r}return p()(t,e),c()(t,[{key:"initPopup",value:function(){var e=this;Object(re.b)().then((function(){e.subscribe().then((function(e){v.a.debug(e);var t=document.getElementById("loading");t&&(t.style.display="none");var n=document.getElementById("status");n&&(n.style.display="none");var i=document.getElementById("success");i&&(i.style.display="block"),setTimeout((function(){window.onbeforeunload=null,window.opener?window.close():history.back()}),1e3)})).catch((function(t){if(v.a.error(t),"default"!==t.reason||!e.config.showConfirmAlertForce){var n=document.getElementById("loading");n&&(n.style.display="none");var i=document.getElementById("status");if(i&&(i.style.display="block",i.innerHTML="<h2>".concat(t?t.message||t.reason||t:"Unbekannter Fehler ist aufgetreten.","</h2>")),"denied"===t.reason||"default"===t.reason){window.onbeforeunload=null;var r=document.querySelector(".subscribe-helper-text");r&&(r.style.marginTop=0);var o=document.getElementById("unblock-tutorial");if(o){var s=new y.a,a=s.getBrowser().name,c=s.getOS().name;if(a=a.toLowerCase().replace(/\s/g,"").replace("chromium","chrome"),c=c.toLowerCase().replace(/\s/g,"").replace("macos","mac"),!("chrome"!==a&&"firefox"!==a&&"safari"!==a||"android"!==c&&"windows"!==c&&"mac"!==c)){var u=document.createElement("img");u.src="https://static.cleverpush.com/app/images/unblock-tutorial/".concat(a,"-").concat(c,".gif"),u.style.display="initial",o.appendChild(u),o.style.display="initial"}}}}}))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"pushManagerSubscribe",value:function(e,t){var n=this;return new Promise((function(i,r){e.pushManager.subscribe(n.getPushManagerSubscribeOptions()).then((function(e){i(e)})).catch((function(o){!t&&o&&o.message&&(o.message.indexOf("subscription with a different application server key")>-1||o.message.indexOf("subscription with a different applicationServerKey")>-1)?e.pushManager.getSubscription().then((function(t){t?(n.migratedSubscription=!0,t.unsubscribe().then((function(){n.pushManagerSubscribe(e,!0).then(i).catch(r)})).catch(r)):r(o)})).catch(r):r(o)}))}))}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){var i=e.config.alertLocalization||{},r=(navigator.language||navigator.userLanguage||"").substr(0,2);e.config.alertLocalizationTranslations&&r&&e.config.alertLocalizationTranslations[r]&&(i=Object.assign({},i,e.config.alertLocalizationTranslations[r]));var o={popupInfo:void 0!==i.popupInfo?i.popupInfo:Object(M.b)("popup.info").formatCleverPush("<strong>".concat(Object(M.b)("confirm.allowBrowser")||Object(M.b)("confirm.allow"),"</strong>")),popupText:void 0!==i.popupText?i.popupText:Object(M.b)("popup.text").formatCleverPush("<strong>".concat(e.config.channelName,"</strong>"))};if(e.isSubscribing)n(new D("A subscription process is already in progress."));else{e.isSubscribing=!0;var s=function(){e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){e.sync(n).then((function(){e.isSubscribing=!1;var n=e.storageManager.getSubscriptionId();e.triggerEvent(N.a.SUBSCRIBED,n),e.parentMessenger&&e.parentMessenger.setSubscribed(n).then((function(){})),t("granted")}))})).catch((function(t){v.a.error(t),e.isSubscribing=!1,n(t)}))};if("default"===Notification.permission){var a=document.getElementById("status");a&&(a.style.display="block",a.innerHTML="<h2>".concat(o.popupInfo,"</h2><p>").concat(o.popupText,"</p>")),Notification.requestPermission((function(t){"granted"===t?s():(e.isSubscribing=!1,n(new S.a(o.popupInfo,t))),e.confirm&&e.confirm.hideBackdrop(),v.a.debug("HTTP Permission Request Result:",t)}))}else"denied"===Notification.permission?(e.isSubscribing=!1,n(new S.a(o.popupInfo,"denied"))):(v.a.debug("PermissionAlreadyGranted"),s())}}))}}]),t}(x),se=function(e){function t(e,n,i){var r;return s()(this,t),r=l()(this,d()(t).call(this,e,n,i)),e.multiChannels&&e.multiChannels.facebookChannel&&e.multiChannels.facebookChannel._id!==e.channelId&&(e.channelId=e.multiChannels.facebookChannel._id,n.channelId=e.channelId),r.triggerEvent(N.a.INITIALIZED),r}return p()(t,e),c()(t,[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){e.subscribed=!!e.storageManager.getFacebookUserRef()||!!e.storageManager.isSubscribed(!0,!0),t(e.subscribed)}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){"true"!==new URLSearchParams(location.search.slice(1)).get("cleverPushFacebookClick")?"denied"!==localStorage.getItem("cleverpush-subscription-status")?e.isSubscribed().then((function(e){e?n(new S.a("User is already subscribed","subscribed")):t(!0)})).catch(n):n(new S.a("User has manually unsubscribed or denied notifications","unsubscribed")):n(new S.a("User is already subscribed","subscribed"))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"setFacebookUserRef",value:function(e){var t=this;this.storageManager.setFacebookUserRef(e),this.sync({facebookUserRef:e}).then((function(){t.isSubscribing=!1,t.triggerEvent(N.a.SUBSCRIBED,t.storageManager.getSubscriptionId()),t.resolveSubscribe&&t.resolveSubscribe("granted")}))}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){e.config.facebookAppId&&e.config.facebookPageId?(window.open("https://m.me/".concat(e.config.facebookPageId),"_blank"),localStorage.setItem("cleverpush-subscription-status","allowed"),e.triggerEvent(N.a.SUBSCRIBED,null),t()):(v.a.warn("Facebook App ID or Page ID missing"),n()),e.confirm&&e.confirm.hideBackdrop()}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(N.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve(!!this.storageManager.getFacebookUserRef())}},{key:"getNotificationPermission",value:function(){return Promise.resolve(this.storageManager.getFacebookUserRef()?"granted":"default")}}],[{key:"initFacebook",value:function(e){if(t.facebookInitialized)e();else{window.fbAsyncInit=function(){v.a.debug("window.fbAsyncInit"),FB.init({appId:CleverPush.config.facebookAppId,version:"v2.9"}),t.facebookInitialized=!0,e()};var n="en_US",i=(navigator.language||navigator.userLanguage||"").replace("-","_").substr(0,5);i&&i!==n&&["en_US","ca_ES","cs_CZ","cx_PH","cy_GB","da_DK","de_DE","eu_ES","en_UD","es_LA","es_ES","gn_PY","fi_FI","fr_FR","gl_ES","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nn_NO","nl_NL","fy_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","ku_TR","zh_CN","zh_HK","zh_TW","af_ZA","sq_AL","hy_AM","az_AZ","be_BY","bn_IN","bs_BA","bg_BG","hr_HR","nl_BE","en_GB","et_EE","fo_FO","fr_CA","ka_GE","el_GR","gu_IN","hi_IN","is_IS","id_ID","ga_IE","jv_ID","kn_IN","kk_KZ","lv_LV","lt_LT","mk_MK","mg_MG","ms_MY","mt_MT","mr_IN","mn_MN","ne_NP","pa_IN","sr_RS","so_SO","sw_KE","tl_PH","ta_IN","te_IN","ml_IN","uk_UA","uz_UZ","vi_VN","km_KH","tg_TJ","ar_AR","he_IL","ur_PK","fa_IR","ps_AF","my_MM","qz_MM","or_IN","si_LK","rw_RW","cb_IQ","ha_NG","ja_KS","br_FR","tz_MA","co_FR","as_IN","ff_NG","sc_IT","sz_PL"].forEach((function(e){e!==i&&e.substr(0,2)!==i.substr(0,2)||(n=e)})),function(e,t,i){var r,o=e.getElementsByTagName(t)[0];e.getElementById(i)||((r=e.createElement(t)).id=i,r.src="//connect.facebook.net/"+n+"/sdk.js",o.parentNode.insertBefore(r,o))}(document,"script","facebook-jssdk")}}}]),t}(x),ae=n(25),ce=function(){function e(t,i,r,o,a,c){s()(this,e),this.config=t,this.subscriptionManager=i,this.isSubscribed=this.subscriptionManager.subscribed,this.api=r,this.confirm=o,this.triggerEvent=a,this.triggerOptIn=c,this.config.bellLocalization&&this.config.bellLocalization.subscribed?this.messageSubscribed=this.config.bellLocalization.subscribed:this.messageSubscribed=Object(M.b)("bell.subscribed"),this.config.bellLocalization&&this.config.bellLocalization.subscribe?this.messageSubscribe=this.config.bellLocalization.subscribe:this.messageSubscribe=Object(M.b)("bell.subscribe"),this.config.bellLocalization&&this.config.bellLocalization.hide?this.messageHide=this.config.bellLocalization.hide:this.messageHide=Object(M.b)("bell.hide"),this.show=this.show.bind(this),this.reset=this.reset.bind(this),this.onClick=this.onClick.bind(this),n(!function(){var e=new Error("Cannot find module './bell.scss'");throw e.code="MODULE_NOT_FOUND",e}())}return c()(e,[{key:"getClassName",value:function(){var e="cleverpush-bell";return this.config.notificationBellPosition&&(e+=" cleverpush-bell-position-"+this.config.notificationBellPosition),this.config.notificationBellPositionY&&(e+=" cleverpush-bell-position-"+this.config.notificationBellPositionY),e}},{key:"initPrompt",value:function(){var e=this;if(!(this.promptInited||this.isSubscribed||window.innerWidth<768||localStorage.getItem("cleverpush-bell-prompt-denied"))){this.promptInited=!0;var t=this.confirm.getLocalization({});this.prompt=document.createElement("div"),this.prompt.className="cleverpush-bell-prompt",this.prompt.innerHTML='\n    <div class="cleverpush-bell-prompt-icon" style="background-image: url(\''.concat(this.config.channelIcon,'\')"></div>\n    <div class="cleverpush-bell-prompt-content">\n      <div class="cleverpush-bell-prompt-title">\n      ').concat(t.title,'\n      </div>\n      <div class="cleverpush-bell-prompt-buttons">\n      <button class="cleverpush-confirm-btn cleverpush-confirm-btn-deny">').concat(t.deny,'</button>\n        <button class="cleverpush-confirm-btn cleverpush-confirm-btn-allow" style="').concat(this.config.confirmAlertAllowButtonStyle&&this.config.confirmAlertAllowButtonStyle.color?"color: "+this.config.confirmAlertAllowButtonStyle.color+";":""," ").concat(this.config.confirmAlertAllowButtonStyle&&this.config.confirmAlertAllowButtonStyle.backgroundColor?"border-color: transparent !important; background: none; background-color: "+this.config.confirmAlertAllowButtonStyle.backgroundColor+";":"",'">').concat(t.allow,"</button>\n      </div>\n    </div>\n    "),this.promptAllow=this.prompt.querySelector(".cleverpush-confirm-btn-allow"),this.promptAllow&&this.promptAllow.addEventListener("click",(function(t){t.preventDefault(),e.prompt.style.display="none"})),this.promptDeny=this.prompt.querySelector(".cleverpush-confirm-btn-deny"),this.promptDeny&&this.promptDeny.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),localStorage.setItem("cleverpush-bell-prompt-denied",Date.now()+""),e.prompt.style.display="none"})),this.bell.appendChild(this.prompt)}}},{key:"show",value:function(e){var t=this;Object(v.b)("bell.show",e),this.isSubscribed=e;var n=!1;try{n="true"===localStorage.getItem("cleverpush-bell-hidden")}catch(e){}if(!n){var i,r=this.getClassName();e?(r+=" cleverpush-bell-disabled",i=this.messageSubscribed,this.config.hideNotificationBellSubscribed&&(r+=" cleverpush-bell-hidden")):i=this.messageSubscribe;var o="";this.config.notificationBellMoreButtons&&(o='<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-settings" style="display: none"><svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M18.88 12.88a6.83 6.83 0 0 0 0-1.76l1.95-1.49a.45.45 0 0 0 .11-.57l-1.85-3.12c-.11-.2-.36-.27-.56-.2l-2.3.9a6.8 6.8 0 0 0-1.57-.88l-.35-2.38a.45.45 0 0 0-.46-.38h-3.7a.45.45 0 0 0-.45.38l-.35 2.38c-.57.23-1.09.53-1.57.88l-2.3-.9a.46.46 0 0 0-.57.2L3.06 9.06c-.12.2-.06.44.12.57l1.95 1.49a6.95 6.95 0 0 0 0 1.76l-1.95 1.49a.45.45 0 0 0-.12.57l1.85 3.12c.12.2.37.27.57.2l2.3-.9c.48.36 1 .65 1.57.88l.35 2.38c.03.22.22.38.45.38h3.7c.23 0 .43-.16.46-.38l.35-2.38a7.16 7.16 0 0 0 1.56-.88l2.3.9c.22.08.46 0 .57-.2l1.85-3.12a.45.45 0 0 0-.11-.57l-1.95-1.49zM12 15.15A3.2 3.2 0 0 1 8.76 12 3.2 3.2 0 0 1 12 8.85 3.2 3.2 0 0 1 15.24 12 3.2 3.2 0 0 1 12 15.15z" id="park-svg-settings-path-1"></path></defs><use xlink:href="#park-svg-settings-path-1" transform="translate(-3 -3)" stroke="none" stroke-width="1" fill-rule="evenodd"></use></svg><span class="cleverpush-tooltip">'.concat(Object(M.b)("panel.settings"),'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-subscribe" style="display: none"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n<g><path d="M380.6,989.9c-30.5,0-59.3-14.2-77.8-38.7L52.6,621C20,578,28.5,516.8,71.5,484.3c43-32.6,104.1-24.1,136.7,18.9l164.6,217.3L786.7,56c28.5-45.7,88.7-59.7,134.5-31.2c45.8,28.4,59.7,88.7,31.2,134.4L463.5,944c-17,27.4-46.4,44.5-78.5,45.9C383.6,990,382.1,990,380.6,989.9L380.6,989.9z"/></g>\n</svg><span class="cleverpush-tooltip">').concat(this.messageSubscribe,'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-hide" style="display: none"><svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.87L6.87 8 4 5.13 1.13 8 0 6.87 2.87 4 0 1.13 1.13 0 4 2.87 6.87 0 8 1.13 5.13 4z"></path></svg><span class="cleverpush-tooltip">').concat(this.messageHide,"</span></button>\n")),this.bell=document.createElement("div"),this.bell.className=r,this.bell.innerHTML="".concat(o,"<div class='cleverpush-bell-message'>").concat(i,"</div>");var s=document.body;if(this.config.bellParentSelector&&(s=document.querySelector(this.config.bellParentSelector)||document.body),s.appendChild(this.bell),this.bell&&(this.bell.addEventListener("click",this.onClick.bind(this)),this.config.notificationBellColor&&this.config.notificationBellColor.length&&(this.bell.style.backgroundColor=this.config.notificationBellColor),this.config.notificationBellOffsetTop&&"bottom"!==this.config.notificationBellPositionY&&(this.bell.style.top=this.config.notificationBellOffsetTop+"px"),this.config.notificationBellOffsetBottom&&"top"!==this.config.notificationBellPositionY&&(this.bell.style.bottom=this.config.notificationBellOffsetBottom+"px"),this.config.notificationBellOffsetLeft&&"right"!==this.config.notificationBellPosition&&(this.bell.style.left=this.config.notificationBellOffsetLeft+"px"),this.config.notificationBellOffsetRight&&"left"!==this.config.notificationBellPosition&&(this.bell.style.right=this.config.notificationBellOffsetRight+"px"),this.config.notificationBellMoreButtons&&this.initMoreButtons()),this.config.showNotificationBellPrompt){var a=!0;if(this.config.notificationBellPromptVisits){var c=parseInt(localStorage.getItem("cleverpush-bell-prompt-visits"),10)||0;a=c>=this.config.notificationBellPromptVisits,c+=1,localStorage.setItem("cleverpush-bell-prompt-visits",c+"")}a&&setTimeout((function(){t.initPrompt()}),this.config.notificationBellPromptSeconds||0)}}}},{key:"initMoreButtons",value:function(){var e=this;this.settingsButton=this.bell.querySelector(".cleverpush-bell-more-settings"),this.settingsButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.settingsButton.style.display="none",e.hideButton.style.display="none",e.config.notificationBellSettingsLink?window.open(e.config.notificationBellSettingsLink,"_blank"):e.showPanel()},this.subscribeButton=this.bell.querySelector(".cleverpush-bell-more-subscribe"),this.subscribeButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.subscribeButton.style.display="none",e.hideButton.style.display="none",e.subscribe()},this.hideButton=this.bell.querySelector(".cleverpush-bell-more-hide"),this.hideButton.onclick=function(t){t.stopPropagation(),e.hideForever()}}},{key:"reset",value:function(e){if(Object(v.b)("bell.reset",e),this.isSubscribed=e,this.moreButtonsVisible=!1,this.bell){var t,n=this.getClassName();e?(n+=" cleverpush-bell-disabled",this.config.hideNotificationBellSubscribed&&(n+=" cleverpush-bell-hidden"),t=this.messageSubscribed):t=this.messageSubscribe,this.bell.className=n;var i=this.bell.querySelector(".cleverpush-bell-message");i&&(i.innerHTML=t);var r=this.bell.querySelector(".cleverpush-loader");r&&r.parentNode&&r.parentNode.removeChild(r),this.config.notificationBellMoreButtons&&this.initMoreButtons()}e&&this.prompt&&(this.prompt.style.display="none")}},{key:"hideForever",value:function(){localStorage.setItem("cleverpush-bell-hidden","true"),this.bell.style.display="none"}},{key:"showMessage",value:function(e,t){if(this.bell){var n=this.bell.querySelector(".cleverpush-bell-message");n.className+=" cleverpush-bell-message-open",n.innerHTML=e,setTimeout((function(){n.innerHTML=Object(M.b)("bell.subscribe"),n.className="cleverpush-bell-message"}),1e3*t)}}},{key:"showPanel",value:function(){this.panel||(this.panel=new ae.a(this.config,this.subscriptionManager,this.triggerEvent,this.api)),this.panel.show()}},{key:"setLoading",value:function(){this.bell.className+=" cleverpush-bell-loading",this.bell.innerHTML+='<div class="cleverpush-loader"><div></div><div></div><div></div><div></div></div>'}},{key:"subscribe",value:function(){var e=this;Object(v.b)("bell.subscribe");var t=this.subscriptionManager.getNotificationPermission(!0),n="default"===t;this.config.channelTopics&&this.config.channelTopics.length&&(this.config.confirmAlertSelectTopicsLater=!0),this.api.fromBellWidget=!0,this.api.confirmAlertShown(),this.subscriptionManager.isSubscribing||(v.a.debug("showBackdrop",n),"denied"!==t&&this.setLoading(),this.triggerOptIn(!0,(function(t){t?(e.reset(e.isSubscribed),!e.config.ownDomain||"https:"!==location.protocol||"denied"!==t.reason&&"default"!==t.reason?v.a.error(t):e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",t.message)):e.subscriptionManager.getSubscriptionId().then((function(e){}))})))}},{key:"toggleMoreButtons",value:function(){Object(v.b)("bell.toggleMoreButtons");var e=this.bell.querySelector(".cleverpush-bell-message");this.moreButtonsVisible?(this.settingsButton.style.display="none",this.subscribeButton.style.display="none",this.hideButton.style.display="none",this.moreButtonsVisible=!1,this.isSubscribed&&(this.bell.className+=" cleverpush-bell-disabled"),e&&window.innerWidth<768&&(e.className="cleverpush-bell-message"),window.document.activeElement&&window.document.activeElement.blur()):(this.isSubscribed?(this.settingsButton.style.display="flex",this.bell.className=this.getClassName()):this.subscribeButton.style.display="flex",this.hideButton.style.display="flex",this.moreButtonsVisible=!0,e&&window.innerWidth<768&&(e.className+=" cleverpush-bell-message-open"))}},{key:"onClick",value:function(){var e=this;if(Object(v.b)("bell.onClick",!!this.bell),this.bell){"function"==typeof this.handleLoadSdk?(this.setLoading(),this.handleLoadSdk().then((function(){window.CleverPush.waitForBell().then((function(){e.bell.parentNode.removeChild(e.bell),window.CleverPush.bell.onClick()}))})).catch((function(e){v.a.error("Bell loading failed",e)}))):e.config.notificationBellMoreButtons?e.toggleMoreButtons():e.isSubscribed?e.showPanel():e.subscribe()}}}]),e}(),ue=function(e){function t(){var e;return s()(this,t),(e=l()(this,d()(t).call(this))).config={},e.log=v.a,e.initialized=!1,e.initCalled=!1,e.api=null,e.subscriptionManager=null,e.version="1.0.0",e}return p()(t,e),c()(t,[{key:"init",value:function(e,t){var n=this;Object(v.b)("init",e),v.a.info("Browser:",C.a.name,C.b);var i=function(e,i){var r=void 0!==i?i:!e;"function"==typeof t?t(e,r):e&&(e.warn||"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason?v.a.warn(e.message):v.a.error(e)),"function"==typeof window.cleverPushInitCallback&&window.cleverPushInitCallback(e,r),e&&n.trigger(N.a.INITIALIZATION_FAILED)};this.initCalled?i(new S.a("Init was already called, please only call init() once.","init-already-called"),!1):(this.initCalled=!0,"object"!==r()(e)?i(new S.a("Required parameter `config` not given.","invalid-config")):e.channelId?this.initialized?i(new S.a("CleverPush SDK was already initialized.","already-initialized")):(this.api=new O(e.channelId),Object(C.i)().then((function(t){e.apiEndpoint&&(n.api.endpoint=e.apiEndpoint);new w.a((function(t){"undefined"==typeof fetch||void 0!==e.loadConfig&&!e.loadConfig?e.loadConfigUrl?I(e.loadConfigUrl).then((function(e){t(e||{})})):t({}):n.api.getChannelConfig(!1).then((function(e){t(e)}))})).then((function(t){n.config=Object.assign({autoRegister:!0,alertTimeout:0,alertMinimumVisits:0,loadIframe:!0,trackSessions:!0},t,e),"object"===r()(self.cleverPushConfig)&&(n.config=Object.assign(n.config,self.cleverPushConfig)),v.a.debug("Config:",n.config),n.config.apiEndpoint&&(n.api.endpoint=n.config.apiEndpoint),Object(re.c)().then((function(){var e;if(e="safari"===n.browserType?L:"facebook"===n.browserType?se:Object(C.f)()?oe:Object(C.e)()?ie:!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname?ee:Q,n.subscriptionManager=new e(n.config,n.api,n.trigger.bind(n)),n.config.customCss){var t=document.createElement("style");t.innerHTML=n.config.customCss,document.body.appendChild(t)}n.config.showNotificationBell&&(("Android"===C.h.name||"mobile"===C.c.type)&&n.config.hideNotificationBellMobile||(n.bell=new ce(n.config,n.subscriptionManager,n.api,null,n.trigger.bind(n)),n.bell.handleLoadSdk=function(){return new w.a((function(e,t){var i=document.createElement("script");i.async=!0,i.onload=function(){window.CleverPush.init(Object.assign({},n.config,{loadConfigUrl:void 0,loadConfig:!1,loadIframe:!1})),e()},i.onerror=function(){t()},i.src=n.config.loadSdkUrl||"https://static.cleverpush.com/channel/loader/"+n.config.channelId+".js",document.head.appendChild(i)}))},n.subscriptionManager.isSubscribed().then((function(e){n.bell&&n.bell.show(e)})),n.on(N.a.SUBSCRIBED,(function(){n.bell&&n.bell.reset(!0)})),n.on(N.a.UNSUBSCRIBED,(function(){n.subscriptionManager.subscribed=!1,n.bell&&n.bell.reset(!1)}))))})).catch((function(e){i(e)}))})),v.a.debug("Init done"),n.initialized=!0,n.initCalled=!1,i(!1,!0)}))):i(new S.a("Required attribute `channelId` in `config` not given.","invalid-config")))}}]),t}(g.a);window.CleverPushBell=new ue,n.d(t,"default",(function(){return le}));var le=function(e){function t(){var e;return s()(this,t),(e=l()(this,d()(t).call(this))).config={},e.log=v.a,e.initialized=!1,e.initCalled=!1,e.api=null,e.subscriptionManager=null,e.version="1.0.0",e}return p()(t,e),c()(t,[{key:"init",value:function(e,t){var n=this;Object(v.b)("init",e),v.a.info("Browser:",C.a.name,C.b);var i,o=function(e,i){var r=void 0!==i?i:!e;"function"==typeof t?t(e,r):e&&(e.warn||"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason?v.a.warn(e.message):v.a.error(e)),"function"==typeof window.cleverPushInitCallback&&window.cleverPushInitCallback(e,r),e&&n.trigger(N.a.INITIALIZATION_FAILED)};if(this.initCalled)o(new S.a("Init was already called, please only call init() once.","init-already-called"),!1);else if(this.initCalled=!0,"object"!==r()(e))o(new S.a("Required parameter `config` not given.","invalid-config"));else if(e.channelId)if(this.initialized)o(new S.a("CleverPush SDK was already initialized.","already-initialized"));else{this.api=new O(e.channelId),e.apiEndpoint&&(this.api.endpoint=e.apiEndpoint);this.config=e,i="safari"===n.browserType?L:"facebook"===n.browserType?se:Object(C.f)()?oe:Object(C.e)()?ie:!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname?ee:Q,n.subscriptionManager=new i(n.config,n.api,n.trigger.bind(n)),v.a.debug("Init done"),this.initialized=!0,this.initCalled=!1,o(!1,!0)}else o(new S.a("Required attribute `channelId` in `config` not given.","invalid-config"))}},{key:"initHttpIframe",value:function(e,t){return this.init(e,t)}}]),t}(g.a);window.CleverPush=new le}]);
</script>

    <script>
        CleverPush.initHttpIframe({
            channelId: '9nsSYmLaJtzaNE2ay',
            channelSubdomain: 'statistacomdev',
            channelDomain: 'https://www.statista.com/',
        });
    </script>
</head>
<body>


</body></html>